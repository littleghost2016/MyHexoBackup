[{"title":"使用scoop","url":"https://littleghost2016.github.io/2020/03/28/使用scoop/","content":"<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><h2 id=\"允许本地脚本执行\"><a href=\"#允许本地脚本执行\" class=\"headerlink\" title=\"允许本地脚本执行\"></a>允许本地脚本执行</h2><figure class=\"highlight powershell\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ <span class=\"built_in\">set-executionpolicy</span> remotesigned -scope currentuser</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"自定义scoop安装路径\"><a href=\"#自定义scoop安装路径\" class=\"headerlink\" title=\"自定义scoop安装路径\"></a>自定义scoop安装路径</h2><figure class=\"highlight powershell\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ [environment]::setEnvironmentVariable(<span class=\"string\">'SCOOP'</span>,<span class=\"string\">'D:\\scoop'</span>,<span class=\"string\">'User'</span>)</span><br><span class=\"line\">$ <span class=\"variable\">$env:SCOOP</span>=<span class=\"string\">'D:\\scoop'</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"执行安装脚本\"><a href=\"#执行安装脚本\" class=\"headerlink\" title=\"执行安装脚本\"></a>执行安装脚本</h2><figure class=\"highlight powershell\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ iex (<span class=\"built_in\">new-object</span> net.webclient).downloadstring(<span class=\"string\">'https://get.scoop.sh'</span>)</span><br></pre></td></tr></table></figure>\n\n","categories":["技术"],"tags":["scoop"]},{"title":"树莓派使用docker","url":"https://littleghost2016.github.io/2020/01/24/树莓派使用docker/","content":"<h1 id=\"解决Got-permission-denied问题\"><a href=\"#解决Got-permission-denied问题\" class=\"headerlink\" title=\"解决Got permission denied问题\"></a>解决Got permission denied问题</h1><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo groupadd docker\t\t\t\t<span class=\"comment\">#添加docker用户组</span></span><br><span class=\"line\">$ sudo gpasswd -a <span class=\"variable\">$USER</span> docker\t\t<span class=\"comment\">#将登陆用户加入到docker用户组中</span></span><br><span class=\"line\">$ newgrp docker\t\t\t\t\t\t<span class=\"comment\">#更新用户组</span></span><br><span class=\"line\">$ docker ps</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置国内镜像源\"><a href=\"#配置国内镜像源\" class=\"headerlink\" title=\"配置国内镜像源\"></a>配置国内镜像源</h1><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;registry-mirrors&quot;: [</span><br><span class=\"line\">    &quot;https://dockerhub.azk8s.cn&quot;,</span><br><span class=\"line\">    &quot;https://hub-mirror.c.163.com&quot;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo systemctl daemon-reload</span><br><span class=\"line\">$ sudo systemctl restart docker.service</span><br></pre></td></tr></table></figure>\n\n","categories":["技术"],"tags":["树莓派","docker"]},{"title":"树莓派搭建smb","url":"https://littleghost2016.github.io/2020/01/20/树莓派搭建smb/","content":"<blockquote>\n<p>  <del>很简单，有手就行。</del></p>\n</blockquote>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><ol>\n<li>安装二进制文件</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo apt install samba</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>修改配置文件</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/samba/smb.conf</span><br></pre></td></tr></table></figure>\n\n<p>最后添加如下内容。<em>path为共享文件夹的路径，请根据自身情况修改</em></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[share]</span><br><span class=\"line\">comment = Personal SMB server</span><br><span class=\"line\">path = /home/ubuntu/sambaDirectory</span><br><span class=\"line\">public = no</span><br><span class=\"line\">writable = yes</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>重启<code>samba</code>服务</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo systemctl restart smbd.service</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>为<code>samba</code>配置新用户</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo pdbedit -a -u ubuntu</span><br></pre></td></tr></table></figure>\n\n<p>输入两遍密码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">new password:</span><br><span class=\"line\">retype new password:</span><br></pre></td></tr></table></figure>\n\n<p>最后的回显</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Unix username:        ubuntu</span><br><span class=\"line\">NT username:</span><br><span class=\"line\">Account Flags:        [U          ]</span><br><span class=\"line\">User SID:             S-1-5-21-3656490077-3147567822-1491380157-1000</span><br><span class=\"line\">Primary Group SID:    S-1-5-21-3656490077-3147567822-1491380157-513</span><br><span class=\"line\">Full Name:            Ubuntu</span><br><span class=\"line\">Home Directory:       \\\\ubuntu\\ubuntu</span><br><span class=\"line\">HomeDir Drive:</span><br><span class=\"line\">Logon Script:</span><br><span class=\"line\">Profile Path:         \\\\ubuntu\\ubuntu\\profile</span><br><span class=\"line\">Domain:               UBUNTU</span><br><span class=\"line\">Account desc:</span><br><span class=\"line\">Workstations:</span><br><span class=\"line\">Munged dial:</span><br><span class=\"line\">Logon time:           0</span><br><span class=\"line\">Logoff time:          Wed, 06 Feb 2036 15:06:39 UTC</span><br><span class=\"line\">Kickoff time:         Wed, 06 Feb 2036 15:06:39 UTC</span><br><span class=\"line\">Password last set:    Mon, 20 Jan 2020 01:54:24 UTC</span><br><span class=\"line\">Password can change:  Mon, 20 Jan 2020 01:54:24 UTC</span><br><span class=\"line\">Password must change: never</span><br><span class=\"line\">Last bad password   : 0</span><br><span class=\"line\">Bad password count  : 0</span><br><span class=\"line\">Logon hours         : FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h1><ol>\n<li><p>Windows文件资源管理器输入<code>\\\\{树莓派IP}\\share</code></p>\n</li>\n<li><p>输入刚刚设置的<code>samba</code>用户名和密码，进入共享文件夹。</p>\n</li>\n</ol>\n<h1 id=\"关于pdbedit\"><a href=\"#关于pdbedit\" class=\"headerlink\" title=\"关于pdbedit\"></a>关于pdbedit</h1><p><code>pdbedit</code>是<code>samba</code>的用户管理命令</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">主要参数</th>\n<th align=\"center\">作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">-L, –list</td>\n<td align=\"center\">list all users</td>\n</tr>\n<tr>\n<td align=\"center\">-v, –verbose</td>\n<td align=\"center\">详细信息</td>\n</tr>\n<tr>\n<td align=\"center\">-a, –create</td>\n<td align=\"center\">create user</td>\n</tr>\n<tr>\n<td align=\"center\">-r, –modify</td>\n<td align=\"center\">modify user</td>\n</tr>\n<tr>\n<td align=\"center\">-x, –delete</td>\n<td align=\"center\">delete user</td>\n</tr>\n</tbody></table>\n","categories":["技术"],"tags":["树莓派","smb"]},{"title":"英语作文模板","url":"https://littleghost2016.github.io/2019/12/29/英语作文模板/","content":"<blockquote>\n<p>Painstaking but rewarding. 艰苦卓绝但富有成效。</p>\n</blockquote>\n<p>本篇模板汇总内容为备战考研时的笔记，考研时用了感觉还不错。所有内容来自微博 <a href=\"http://weibo.com/u/6089373308\" target=\"_blank\" rel=\"noopener\">@薛非英语</a>，感谢您！</p>\n<p>内容整理自一年前，可能一些单词有些错误=.=|..</p>\n<h1 id=\"信件\"><a href=\"#信件\" class=\"headerlink\" title=\"信件\"></a>信件</h1><h3 id=\"信件格式\"><a href=\"#信件格式\" class=\"headerlink\" title=\"信件格式\"></a>信件格式</h3><ul>\n<li>Dear teacher</li>\n<li>Dear Mr. / Ms. 姓</li>\n<li>Dear 名</li>\n<li>Dear Sir/Madam 不辨雌雄</li>\n<li>Dear可替换为You Esteemed</li>\n<li>To whom It May concern 给相关人士，一般放在投诉信中</li>\n<li>Dear后面有 ,</li>\n<li>结尾处Yours sincerely后面也有,</li>\n<li>时间：月.日,年<ul>\n<li>Dec. 23, 2018</li>\n<li>注意五月May后面不需要加.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"信件极简开头\"><a href=\"#信件极简开头\" class=\"headerlink\" title=\"信件极简开头\"></a>信件极简开头</h3><ul>\n<li>表明身份（不熟悉）：I’m XX + 定语. I’m writing the letter to do sth</li>\n<li>表明立场（熟悉）：I feel XX when I learned that …  I’m writing the letter to do sth</li>\n</ul>\n<h3 id=\"信件极简结尾\"><a href=\"#信件极简结尾\" class=\"headerlink\" title=\"信件极简结尾\"></a>信件极简结尾</h3><ul>\n<li>I’m full of gratitude for your taking time from your busy schedule and read my letter. I’m  looking forward to you (favorable) reply at your earliest convenience.</li>\n</ul>\n<h2 id=\"投诉信\"><a href=\"#投诉信\" class=\"headerlink\" title=\"投诉信\"></a>投诉信</h2><p>To Whom It May Concern,<br>    I am a [电子产品、日常用品] user of your <u>product / [食物]</u> cuntomer of your store / resident in XX community. I’m writing to inform you my dissatisfaction with <u>your product / your service / the noise</u>.<br>    The focus of my complaint is as follows: On the one hand, (三选一：[产品]the product has been found of poor quality / mutilated(残缺的) since the day I bought it; [服务]I had waited for an unbearably long time until I received the service / the package(包裹); [环境] have been tortured by the XX day and night for a long time). On the other, my previous repetitive(反复的) complaints seemed to have aroused little attention. I feel disappointed, so I demand that the problem (should) be solved as soon as possible.<br>    I would appreciate it if you could take this matter into serious consideration and make efforts to prevent it in the futur before I take further action. I’m looking forward to your early reply.<br>                yours sincerely,<br>                    Li Ming</p>\n<h2 id=\"邀请信\"><a href=\"#邀请信\" class=\"headerlink\" title=\"邀请信\"></a>邀请信</h2><p>Dear XXX,<br>    There will be a 活动 held by 举办单位. As you are a close friend of ours / an expert in this field, we would be pleased to have you join us as an honored guest(嘉宾) / a visting professor(客座教授) / a judeg(评委/裁判) of the contest.<br>    The activity will be held in 地点 at 时刻 on 日期, inluding the items as follows: First, we’ll conduct a discussion(整体意思为discuss) on some heated(热点的) / interesting / professional topics concerning XX / surfaced recently. Then we will enjoy an excellent show / contest / lecture(讲座) presented by some brilliant students / teachers. After that, we will go on to have a taste of some typical local delicacies(当地的美食) and feast(盛宴) our eyes on the spectacular scenery of our campus(学校). I’m sure we’ll have a good time then.<br>    I look forward to your favorable reply(肯定的答复), and your presence will bring us real(可替换special) honor. Please let us know your decision at your earliest convenience. Thank you for your time and consideration.<br>                Respectfully yours,<br>                    Li Ming</p>\n<ul>\n<li>举办单位<ul>\n<li>学生会 Students’ Union</li>\n<li>XX院 Department of XX</li>\n<li>XX协会 XX association / club</li>\n</ul>\n</li>\n<li>地点<ul>\n<li>gym</li>\n<li>auditorium 大礼堂</li>\n</ul>\n</li>\n<li>事件<ul>\n<li>graduation ceremony 毕业典礼</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"拒绝信-辞职信\"><a href=\"#拒绝信-辞职信\" class=\"headerlink\" title=\"拒绝信/辞职信\"></a>拒绝信/辞职信</h2><p>拒绝offer等要自我介绍以下；辞职需要</p>\n<p>Dear XXX,<br>    [拒绝信开头]I’m Li Ming writing on receipt of your letter on 日期. I really appreciate(感激) your cordial(=sincere) offer of the opsition as XXX.<br>    [辞职信开头]I’m Li Ming working as a XX in your company. I really appreciate the opportunity to have worked with such an extraordinary group.<br>    I’m quite reluctant(不情愿的) to inform you that I won’t be avaliable for the job / activity because recently I have been offered a chance to pursue further study in Harvard University, which I can by no means(绝不) afford to miss. What’s more, I found that this is not what my insterest lies in or I’m good at, so it would be unwise for me to keep on doing / accept it. Worse still, I was assigned(被指派) an urgent task in preparation for the 70th anniversary of our university, which deprives me of the time and energy to accept the offer / work for you.<br>    Again, I would like to apologize for having to decline your kind offer / resign from the post. I will you and XX company / university continued success in the future.<br>                Respectfully yours,<br>                    Li Ming</p>\n<h2 id=\"推荐信\"><a href=\"#推荐信\" class=\"headerlink\" title=\"推荐信\"></a>推荐信</h2><h3 id=\"推荐人\"><a href=\"#推荐人\" class=\"headerlink\" title=\"推荐人\"></a>推荐人</h3><p>You Esteemed XXX,<br>    In reply to your(公司) / sb’s request(受推荐的人), I am delighted to have the privilege to write the recommendation in honor of him / her.<br>    Several qualities, as far as I am concerned, make him / her an ideal candidate. First and foremost, during my work / study with sb, I was quite impressed by his inexhaustible innovation dieas and profound insight into the relevant field. What’s more, he always finishes his task with remarkable diligence and punctuality, a quite praiseworthy quality for the young generation, Last but not the least, I’m sure that he will adapt to the new environment soon because he is known to be an outgoing and cooperative person.<br>    I give him / her my highest recommendations without reservation and I am convinced that he / she will never let you down. I would be ready to answer any additional questions you may have.<br>                    Respectfully yours,<br>                        Li Ming</p>\n<ul>\n<li>deligence 贫乏</li>\n<li>diligence 勤奋/勤勉</li>\n</ul>\n<h3 id=\"推荐物\"><a href=\"#推荐物\" class=\"headerlink\" title=\"推荐物\"></a>推荐物</h3><p>Dear XXX,<br>    In reply to your request for recommending a book / movie / tourist attraction / special food / song / activity … of quality. I have great pleasure to introduce XXX.<br>    Several quslities, as far as I am concerned, account for why XX is on the top of my list. First and foremost, it boasts(骄傲地拥有) tremendous artistic / historical / academic / practical / nutritional value which can rarely be found in others of its kind. Plus, you can also get a glimpse(简要地瞅一眼) of XX(中国/建筑) culture after enjoying it because of its abundant native elements peculiar(特有的) to China / American … Still, it also helps to enlarge your circle of friends / practice your Chinese / English because you will definitely come across various people with sililar interests / idiomatic expressions（地道地表达） during the process.<br>    I give it my highest recommendations without reservation(保留) and I am sure that you will love it. I would be pleased to answer any additional questions you may have.<br>                    Respectfully yours,<br>                        Li Ming</p>\n<ul>\n<li>词汇<ul>\n<li>aesthetic 美学的</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"感谢信\"><a href=\"#感谢信\" class=\"headerlink\" title=\"感谢信\"></a>感谢信</h2><p>Dear XXX,<br>    (On behalf of XX, ) I’m writing this letter to express my heartfelt(sincere) gratitude（感激） for your proceless(弥足珍贵的) help during 某项活动(正事) / hospotality(热情款待：腐败) my stay in XX(地点).<br>    First and foremost, as a direct result of your efforts, I have been able to finish the task thoroughly. It was really kind of you to extend your assistance to me(向我伸出援手). / I was thrilled(开心) with(表原因) entertainment(娱乐，招待) you provided.Without your assistance, I’m afraid, I could not have achieved anything. What impressed me the most was your righteous(正直的), morality(美德) and cheerful personality(乐观的性格). You are really a gem of a person to know(您真是一个珠玉般的人).<br>    I hope I have the opportunity of reciprocating(报答). I will fell very honored and pleased if I can help / host you in the near future. I’m looking forward to meeting you next time.<br>                Yours sincerely,<br>                    Li Ming</p>\n<h3 id=\"一般范围\"><a href=\"#一般范围\" class=\"headerlink\" title=\"一般范围\"></a>一般范围</h3><ul>\n<li>正事：感谢帮助</li>\n<li>腐败：感谢招待</li>\n</ul>\n<h3 id=\"招待的等级\"><a href=\"#招待的等级\" class=\"headerlink\" title=\"招待的等级\"></a>招待的等级</h3><ul>\n<li>reception</li>\n<li>accommodation</li>\n<li>entertainment</li>\n</ul>\n<h2 id=\"道歉信\"><a href=\"#道歉信\" class=\"headerlink\" title=\"道歉信\"></a>道歉信</h2><p>Dear XX,<br>    I’m extremely sorry that 所要抱歉的事情. I am hereby(在此，兹) writing to you with some embarrassment and many apologies.<br>    There were several causes leading to the incident(偶然发生的事情) / my fault(我的错误). For a start, before I found the mistake / sth / the time was to limited …(无法参加会议等), I had been fully engaged in studying / doing an important task / packing my luggage. Thus, everything was to late when I realize what had happened. To make things worse, there was / were few people (buses) / too much traffic / too many people / too much work then and there, which also make it impossible for me to make it up(补救) immediately / apologize in person(当面). Although I tried everything I could, what was doen cannot be undone.<br>    I apologized for the trouble I caused to you and assure you that all possible steps will be taken to make it up and to avoid such mistakes happening again. I sincerely hope that you will be able to think in my shoes(理解我的处境) and accept my apology.<br>                Yours sincerely,<br>                    Li Ming</p>\n<h2 id=\"慰问信\"><a href=\"#慰问信\" class=\"headerlink\" title=\"慰问信\"></a>慰问信</h2><p>Dear XX,<br>    (熟悉的人不用自我介绍，不熟悉的说明我是XXX)It brings me great sorrow to hear of your misfortune. I got the news from XX, and know that it has taken its toll on you（你身上受到了伤害，让你付出了代价）.<br>    I know it is almost an intrusion(打扰，闯入) to write at a time like this, but I cannot help letting you know that I, as your frind, will be with you. I can imagine the terror(恐惧) / grief(悲伤) / frustration(挫败感) you must feel in such a catastrophe(巨大的灾难), but I hope you will overcome your mishap(灾祸) with your resolute spirit(决心). If there is anyone you need to turn to(向别人求助，需要帮助), I’ll be most willing to lend you my ear. Maybe it is also helpful to seek(寻找) for inner tranquility(内心的平静) from peaceful music and regain confidence from inspiring books. I’m sure you will be back on your feet(重新振作起来) in no time(=quickly).<br>    If there’s anything we can do for you, please feel easy to let us know. My love and thoughts are with you.<br>                Yours sincerely,<br>                    Li Ming</p>\n<h2 id=\"祝贺信\"><a href=\"#祝贺信\" class=\"headerlink\" title=\"祝贺信\"></a>祝贺信</h2><p><strong>考试通过，找到工作，升学</strong></p>\n<p>Dear XX,<br>    I’m so pleased to learn that …. Please accept my heartiest(最衷心的) congraduations and all good wishes on this milestone(里程碑) in your life.<br>    Having always appreciated(欣赏) your commitment(奉献) very much in XXX(学习，工作，研究),I firmly believe that it was only a matter of time before your efforts were rewarded(你的努力迟早会得到回报). Your success speaks well for(证实了) the truth that nothing is impossible for a willing heart(有志者事竟成). What’s more, I am also convinced that you will make greater contribution to the country if you stick to what you are doing, put it into practice(付诸实践), and share your experience with those who need it.<br>    May you enjoy many more triumphant(欢欣鼓舞的，成功的) days like this!<br>                Yours sincerely,<br>                    Li Ming</p>\n<blockquote>\n<p>May god be with you! 愿上帝与你同在!</p>\n<p>You have been admitted to / recruit by / enroll by XX 被XX录取</p>\n<p>[第一段]learn that you have make great break through in your work / study</p>\n</blockquote>\n<h2 id=\"介绍信\"><a href=\"#介绍信\" class=\"headerlink\" title=\"介绍信\"></a>介绍信</h2><h3 id=\"建筑机构\"><a href=\"#建筑机构\" class=\"headerlink\" title=\"建筑机构\"></a>建筑机构</h3><p>Dear XX,<br>    I am pleased to learn that you are going to be a mumber of us soon. On behalf of 某机构, I am writing to offer you some information about XX, which you may find useful in the foreseeable future(不久的将来).<br>    The xx is located in the center of your city / campus, with its office on the second floor of a white building. It consists of twenty memebers / a staff(工作人员) of twenty / 数目+sth, almost half of whom / which are from abroad. The function of the staff is analogous(类似于) to that of advisors(顾问), who are supposed to ensure desirable circumstances(理想的环境) for all and organize diverse activities. For more detailed information please check(=refer to 查询) the brochure(手册) attached to this letter.<br>    I hope you will find the abovementioned helped. I wish you joy and happiness during your stay here.<br>                Yours sincerely,<br>                    Li Ming</p>\n<ul>\n<li>assure sb</li>\n<li>ensure sth</li>\n</ul>\n<h3 id=\"课程章程\"><a href=\"#课程章程\" class=\"headerlink\" title=\"课程章程\"></a>课程章程</h3><p><strong>选修课、奖学金、留学项目</strong></p>\n<p>Dear XX,<br>    On receipt of your letter of inquiry, I’m delighted and honored to acquaint you with the information about XX (on behalf of 某机构).<br>    The association / award / scholarship / regulation / course is oriented(以…为导向) towards students of XX major /  from XX(remote) area / with a sound command(牢固的掌握) of 某专业  / difficulty in doing sth, and will provide them with technical / academic / financial support during their study / work. On the other hand, the letter shall(非常肯定地想要。如果前面是第一人称，则是应该) meet the rquirements as follows. First and foremost, they are supposed to be outstanding in their study(学习上足够优秀) / be in real need(真正的贫困). Plus, to ensure desirable result(良好的结果), the students concerned(相关的学生) are supposed to obey relevant（相关的） regulations and to finish the tasks punctually(准时地), or they would take punishment from the former(协会，奖学金等）.<br>    I hope you will find the abovementioned helpful. I wish you joy and happiness during your stay here.<br>                Yours sincerely,<br>                    Li Ming</p>\n<h2 id=\"申请信\"><a href=\"#申请信\" class=\"headerlink\" title=\"申请信\"></a>申请信</h2><p>Dear XX,<br>    I’m a student of 著名的学校, expecting to graduate with a Bachelor’s degree this summer. I’m writing to apply for the graduate program(研究生项目) of 学位 of 学校 beginning from fall, 2019 / position of XX as was advertised recently / scholarship for outstanding student in XX专业.<br>    (或者用推荐信的套路，把人称改一下)<br>    Several Factors, I believe, qualify me for the program / scholarship, Firstly, attached please find my resume(随信附上我的简历) which further expatiates(详细叙述) on my academic attainments(学术造诣) and working experience. What’s more, as XX(例如对方的学校等) enjoys remarkable international renown, it has long been a dream of mime to become a member of it. Besides, that I find great interest in the relevant field(对相关领域产生兴趣) also makes me a competent(有能力的) candidate for it. After all, interest if the best teacher.<br>    Thank you for taking time from your busy schedule to read my application, and I would appreciate an opportuity for an interview with you. I’m looking forward to your favorable(称赞的，讨人喜欢的) reply.<br>                Yours sincerely,<br>                    Li Ming</p>\n<ul>\n<li>学位<ul>\n<li>Bachelor’s degree</li>\n<li>Master’ ~</li>\n<li>Doctor’s ~</li>\n</ul>\n</li>\n<li>apply<ul>\n<li>apply to a foreign university for admission</li>\n<li>apply to 对象</li>\n<li>apply for 东西</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"建议信\"><a href=\"#建议信\" class=\"headerlink\" title=\"建议信\"></a>建议信</h2><h3 id=\"个人\"><a href=\"#个人\" class=\"headerlink\" title=\"个人\"></a>个人</h3><p><strong>上学、工作</strong></p>\n<p>Dear XX,<br>    On receipt of your letter on 日期, I hereby(在此) am writing to give my advice with regard to 事由.<br>    xx will be a golden opportunity / golden period of time for you to explore the unknown and broaden your horizon. In this light, you first need to realize that accumulating relevant knowledge would be the first task to ensure success. Secondly, in the foreseeable future, it will be beneficial if you can get along well with your peers(同龄人，周围的人). Still, it is also advisable to familiarize (yourself with )and comply with the regulations there.<br>    I hope you will find the above mentioned useful and practical. Thanks for taking your time reading this letter. I wish you all the very best.<br>                Yours sincerely,<br>                    Li Ming</p>\n<h3 id=\"团体\"><a href=\"#团体\" class=\"headerlink\" title=\"团体\"></a>团体</h3><p><strong>共享单车随处停放、食堂、图书馆</strong></p>\n<p>Dear XX,<br>    I am sb. of XX university. I’m writing this letter to show my serious concern about and suggestions for 某个问题(the problem that…).<br>    It is heartbreaking to see that xx问题is deteriorating / xx问题 has not aroused due attention. To address the problem, 机构, at the first place, is responsible for setting up effective retulations to ensure a sound atmosphere(良好的氛围) for all. Moreover, it is advisable to clutive(树立，培养) among all its members a correct attitude toward service / consumption / environment / health / … . Last but not the least, it is high time(是时候做…) that the 团体 organized various activities on a regular basis to improve the status quo(改善现状).<br>    Thank you for taking your busy schedule to read my letter. I’m eager to witness a speedy solution(快速的解决) of the problem.<br>                Yours sincerely,<br>                    Li Ming</p>\n<h2 id=\"咨询信\"><a href=\"#咨询信\" class=\"headerlink\" title=\"咨询信\"></a>咨询信</h2><p><strong>学校、公司、旅社</strong></p>\n<p>Dear XX,<br>    I’m a student of xx学校. As I’ll be doing / I am extremely interested in … .I should(虚拟语气) be grateful if you would kindly provide me with some information concerning…<br>    The focus of my question are as follows. First of all, as I’m a student leading an extremely regular life. I’d like to know your general schedule there. Plus, I’m wondering if there is any special requirement or favorable policies(优惠政策) for undergraduates like me. What’s more, could you please send me the relevant information / application form / a map / the detailed address of … , if it is not too much of a bother?<br>    Again, I would appreciate your taking time answering my questions. I’m expecting your early reply at your convenience.<br>                Yours sincerely,<br>                    Li Ming</p>\n<h1 id=\"通知\"><a href=\"#通知\" class=\"headerlink\" title=\"通知\"></a>通知</h1><h2 id=\"框架\"><a href=\"#框架\" class=\"headerlink\" title=\"框架\"></a>框架</h2><p>引言——2句……表明身份+表明目的<br>主体——4句……主题句——分论点1,2,3<br>结尾——2句……总结句——套话<br>落款（左下角日期，右下角组织或个人）</p>\n<h2 id=\"寻物-失物\"><a href=\"#寻物-失物\" class=\"headerlink\" title=\"寻物/失物\"></a>寻物/失物</h2><blockquote>\n<p>限官形龄色图</p>\n</blockquote>\n<p>LOST / FOUND<br>    I am a sb who stayed in 某地 for three days during the Spring Festival. I am writing this letter to ask if anyone has found / lost a wallet.<br>    Among all the features of the wallet, the following three are the most noticeable(引人注目的). First of all, it is a medium-sized black leather wallet(可换) with a small logo of prada on it. What’s in it includes an ID card, several credit cards and some cash. Needless to say, it mean a lot to me / the owner, and everything woud become a mess without it.<br>    It was (most likely寻物的时候要加) left on the table in room 2048. I would be much obliged(=appreciate) the one who found / lost it contact me at 123456.<br>                Yours sincerely,<br>                    Li Ming</p>\n<h2 id=\"招募\"><a href=\"#招募\" class=\"headerlink\" title=\"招募\"></a>招募</h2><p>XX WANTED<br>    A 某活动 is to be held for 目的 / by 主办方+时间. As it is meant to enhance communication between A and B / help those in need(那些需要帮助的人) … , we are badly in want of XX to ensure that everything would proceed smoothly(一切都进展顺利).<br>    First and foremost, applications are supposed to have sound knowledge of the field, thus undergraduates(本科生) of relevant majors are welcome to it. What’s more, those who have relevant experience are preferred(更偏重). Still, team spirit, deligence(勤奋), and dedication(献身精神) are some of the prerequisite qualities(预先要求的品质) to guarantee ideal performance(理想的表现). Other requirements include attendance and good oral English(口语).<br>    If you are interested and willing to become one of us, please do not hesitate to send your resume to 地址 / contact us before 最后期限.</p>\n<p>日期                主办方</p>\n<h2 id=\"欢迎\"><a href=\"#欢迎\" class=\"headerlink\" title=\"欢迎\"></a>欢迎</h2><p>WELCOME TO XXX<br>    Welcome to XXX! It could serve as a platform to show your outstanding ability and help you develop a range of great skills.<br>    You can be involved in a variety of activities including … . Those after-class could offer you ample opportunities to improve yourselves. First, your active participation is helpful to managing interpersonal relations(人际关系). Second, the activities could raise your level of proficiency(熟练) in XXX. A good command(掌握) of it empowers you to enjoy a great advantage over your peers in competition.<br>    You can file a written application to our staff office or email us via <a href=\"mailto:abc@163.com\" target=\"_blank\" rel=\"noopener\">abc@163.com</a>. The deadline for entry is 日期. Join us and have fun.</p>\n<p>日期                    XX<br>                    club</p>\n<h2 id=\"征稿\"><a href=\"#征稿\" class=\"headerlink\" title=\"征稿\"></a>征稿</h2><p>CONTRIBUTIONS WANTED<br>    In this day and age, nothing has aroused more than attention than 征稿主题. In the light of this(鉴于此), 杂志名/组织名 is hereby issuing a call(发布一个号召) for papers on it.<br>    All undergraduate students(本科生) are welcome to contribute articles(投稿) as long as they can meet the selection criteria（遴选标准） as follows. First and foremost, the papers must stick to 主题 and topics in relation to it. Moreover, the papers are to be（将来时表规定） written in English within 5,000 words with abstract(n.摘要 adj.抽象的) in Chinese. All papers must be original(原创的) and plagiarism(剽窃=academic theft) shall incur corresponding legal liabilities(招致法律责任).<br>    If you are interested, please submit your article before the deadline on 日期, and the contribution fee is rmb 500 per 1,000 words. We are looking forward to your participation!</p>\n<p>日期                杂志名</p>\n<h2 id=\"募捐\"><a href=\"#募捐\" class=\"headerlink\" title=\"募捐\"></a>募捐</h2><p>DONATION WANTED<br>    It is reported that sb are suffering from (the aftermath) of xx. As they are in bad need of help, 机构 is hereby calling for donation to improve their situation.<br>    All forms of contributions are welcome including cash, clothes, books, and so forth(=and the like). The donation will be handled and delivered directly to the needy ones by a professional foundation(基金会). A charity event(慈善义演) is to be helped in the auditorium(礼堂) on our campus on 日期, and donations will be collected and classified on the spot(当场).<br>    It is an excellent opportunity to repay the society. With our joint efforts and benevolence, we are bound to make thins better for them.</p>\n<p>日期                    XX机构</p>\n<h2 id=\"更正\"><a href=\"#更正\" class=\"headerlink\" title=\"更正\"></a>更正</h2><p>CORRECTION<br>    To our great regret, the xx机构 released the wrong information about the time / place / details of sth. We hereby issue the notice of correction.<br>    Originally the activity was told to be held on 日期 / sb was claimed to have done sth, but we afterwards learnt that the assembly hall(大礼堂) was still under decoration then / there will not be enough staff available then / we referred to invalid sources(参考了不可靠的信息源头，即信息不可靠), which meant that the initial plan impossible / statement unacceptable. After reaffirmation, we finally decided that xx活动 will be held on 日期 at 地点 / xx is actually xx(题目中给出的更正细节信息). We will be much obliged(感激) if you could spread the information to the people concerned.<br>    Again, we must apologize for the dreadful mistake, and we will do everything possible to make up for it. We will be happy to take any further questions(解答问题).</p>\n<p>日期                XX机构</p>\n<h1 id=\"备忘录\"><a href=\"#备忘录\" class=\"headerlink\" title=\"备忘录\"></a>备忘录</h1><h2 id=\"格式\"><a href=\"#格式\" class=\"headerlink\" title=\"格式\"></a>格式</h2><p>To:XX<br>From:XX<br>Date:Jan. 1, 2020<br>Subject:Xxxxxxx<br>    Xxx<br>    Xxx<br>    Xxx</p>\n<h2 id=\"例\"><a href=\"#例\" class=\"headerlink\" title=\"例\"></a>例</h2><p>To:收阅人<br>From:写信人<br>Data:时间<br>Subject:Make up a Plan for a Training<br>    As we discussed earlier this week, I agree with you that our faculty(教师) is in urgent need of proficiency(专业度) of multimedia devices in teaching(不能熟练使用多媒体设备). Thus, we need to make up a plan for it.<br>    I would like you to design 活动. We had better classify the teachers in groups and put them into the program according to their own levels.<br>    Write a brief proposal(建议) about your ideas of the program and present it to us in the meeting of the faculty. The presentation is suppoesd to cover every detail of the project in terms of time, place, and peoplr involved.</p>\n<h1 id=\"报告\"><a href=\"#报告\" class=\"headerlink\" title=\"报告\"></a>报告</h1><p><strong>读书、调研</strong></p>\n<p>Reading Rrport on ‘书名’<br>    Li Ming of Graduate School<br>    I have just finished reading “书名” written by sb, and I am writing to report what I have learnt from it.<br>    The book can be divided into three parts. The first one gives a brief introduction of the background information and the second one is the body of discussion. In the end, the author puts forward(提出) some convincing conclusions (by pointing out that xx is worth our grave concern). What impressed me the most was the different cultural elements demonstrated(展示) in the discussion and the author’s solid command(扎实地掌握) of language.<br>    In the end, the work is worthy of our attention in more ways than one. It casts light on the solution of the present issues and the future study of them.<br>                Yours sincerely,<br>                        Li Ming</p>\n<h1 id=\"图画作文\"><a href=\"#图画作文\" class=\"headerlink\" title=\"图画作文\"></a>图画作文</h1><h2 id=\"第一段\"><a href=\"#第一段\" class=\"headerlink\" title=\"第一段\"></a>第一段</h2><h3 id=\"第一句\"><a href=\"#第一句\" class=\"headerlink\" title=\"第一句\"></a>第一句</h3><h4 id=\"如图所示\"><a href=\"#如图所示\" class=\"headerlink\" title=\"如图所示\"></a>如图所示</h4><p>As is (1 +adv) (2 shown) in the (3 drawing) above</p>\n<ul>\n<li>1 adv:graphically（图示地） / vividly（生动地） / symbolically（深刻地） / ironically（讽刺地）</li>\n<li>2 depicted / revealed / demonstrated / displayed / illustrated</li>\n<li>3 cartoon / picture / sketch（简笔画、素描）</li>\n</ul>\n<h4 id=\"图片\"><a href=\"#图片\" class=\"headerlink\" title=\"图片\"></a>图片</h4><h5 id=\"有人的\"><a href=\"#有人的\" class=\"headerlink\" title=\"有人的\"></a>有人的</h5><p>sb (1 ) be doing sth (2 adv)</p>\n<ul>\n<li><p>1</p>\n<ul>\n<li><table>\n<thead>\n<tr>\n<th></th>\n<th></th>\n<th></th>\n</tr>\n</thead>\n<tbody><tr>\n<td></td>\n<td>faced with XX  (a mountain)</td>\n<td>面对</td>\n</tr>\n<tr>\n<td>sb</td>\n<td>in/on …  (例on campus, in tagged coat)</td>\n<td>属性</td>\n</tr>\n<tr>\n<td></td>\n<td>with sb/sth 介词/分词  (with a bag on his back, with a girl shopping)</td>\n<td>便随</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n<li><p>2</p>\n<ul>\n<li><p>vigorously 起劲地</p>\n</li>\n<li><p>wholeheartedly 全心全意地</p>\n</li>\n<li><p>joyfully 开心地</p>\n</li>\n<li><p>confusedly 迷茫地</p>\n</li>\n<li><p>hesitately 迟疑地</p>\n</li>\n<li><p>helplessly 无助地</p>\n</li>\n<li><p>frustratelly 沮丧地</p>\n</li>\n<li><p>absent-mindedly 三心二意地</p>\n<p><em>An American girl, in Chinese traditional costume, is smiling sweetly.</em></p>\n<p><em>The earth, with a chimney in its mouth, is suffering from lung cancer.</em>(with smoke coming out from mouth)</p>\n<p><em>Several young people, faced with a table full of delicacies, are playing with their mobile phones concentratedly.</em></p>\n<p><em>A man on the left, faced with a spilt(or fallen) bottle, is feeling frustrated because it is alomst empty. On the other hand（万能）/On the contrary（相反）\\likewise（相同）, another man is feeling quite the opposite, because there is still some left.</em></p>\n<p><em>A boy, with his father watching TV, is studying helplessly. On the other hand, another father and his son are studying together.</em> || <em>A father sitting in front of the TV idly(悠闲的), is asking his son to study hard. On the contrary, another father and his son are studying together.</em></p>\n<p><em>two tourises faced with 美景, are littering rubbish into the rival.</em></p>\n<p><em>There ara a wild range of <u>rubbish / garbage</u> ont the lake of a place of interest, including fruit peel(果皮), one-time-off tablewares(一次性餐具), leftover(剩菜剩饭)</em></p>\n<p><em>a woman, with her daughter;s hand in hers, raised the latter thirty years ago. Likewise, …</em></p>\n</li>\n</ul>\n</li>\n</ul>\n<h5 id=\"无人的\"><a href=\"#无人的\" class=\"headerlink\" title=\"无人的\"></a>无人的</h5><p>there be (1) sth + 介词短语/修饰</p>\n<h5 id=\"例-1\"><a href=\"#例-1\" class=\"headerlink\" title=\"例\"></a>例</h5><p><em>如图所示, there used to be a large number of fishes(不同种的鱼，加es) in the sea with only one fishing boat in 1905. On the contrary, the condition in 1995 its quite the opposite.</em></p>\n<p><em>… , there are a wild range of cultural elements in a hotpot including Buddhism(佛教), Taoism(道教), Confucianism(儒教).</em></p>\n<h3 id=\"第二句\"><a href=\"#第二句\" class=\"headerlink\" title=\"第二句\"></a>第二句</h3><p><u>Actually(题目画的明显) / undoubtedly(题目画的隐晦)</u>, the drawer depicts a <u>prevalent phenomenon / heated topic</u>, namely, 主题.</p>\n<h3 id=\"第三句-可以没有\"><a href=\"#第三句-可以没有\" class=\"headerlink\" title=\"第三句(可以没有)\"></a>第三句(可以没有)</h3><ol>\n<li>我认为, it is a matter which deserves grave attention.</li>\n<li>我认为, differenct standpoints toward it may lead to results pole apart.<ul>\n<li>我认为<ul>\n<li>from where I stand</li>\n<li>as far as I’m concerned</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"第二段\"><a href=\"#第二段\" class=\"headerlink\" title=\"第二段\"></a>第二段</h2><h3 id=\"首句\"><a href=\"#首句\" class=\"headerlink\" title=\"首句\"></a>首句</h3><p>The phenomenon is thought-provoking in more ways than one, among which the following three are of special significance.</p>\n<h3 id=\"分论点一\"><a href=\"#分论点一\" class=\"headerlink\" title=\"分论点一\"></a>分论点一</h3><p>First and foremost, that some people are <u>keenly(敏锐地) / not completely</u> aware of the significance（意义） / virtue（优点） / harm（带来的伤害） / whole picture（全貌） of 主题 is the psychological basis that contributes to the phenomenon. After all, it is human nature to <u>pursue self-actualization（自我价值的实现） and public recognition（公众的认可） through their conducts</u>（正面的） / <u>focus only the present interest (convenience / condition)</u>（负面的） / <u>shirk(逃避) all labor and duty if they can</u>（负面的）.</p>\n<h3 id=\"分论点二\"><a href=\"#分论点二\" class=\"headerlink\" title=\"分论点二\"></a>分论点二</h3><p>In the light of this(因此), numerous individuals, especially the ones from humble backgrounds, become typical beneficiaries / victims(受益者/受害者) in that</p>\n<ul>\n<li>they are bound to succeed <u>academically / economically</u>(学习上/经济上) more easily with 主题</li>\n<li>their <u>health / well-being(幸福) / living condition</u> can be <u>improved / at risk</u> with the <u>advent(出现) / absence(缺失)</u> of 主题</li>\n<li>they are (not) able to enjoy the best that the world can offer because of 主题</li>\n</ul>\n<h3 id=\"分论点三\"><a href=\"#分论点三\" class=\"headerlink\" title=\"分论点三\"></a>分论点三</h3><ul>\n<li>We have every reason to say that 主题 <u>boasts irreplaceable value / poses irretrievable(无法逆转的) harm to the development and harmony of the nation / the education of the next generation / environment and ecological balance(环境与生态平衡) / cultural diversity and prosperity(文化的多元与繁荣)</u>, so it is no wonder universally(=unanimously一致) acknowledged as a <u>gem(珠玉) / poison / epidemic(流行病)</u> of modern sociery.</li>\n</ul>\n<h3 id=\"末句\"><a href=\"#末句\" class=\"headerlink\" title=\"末句\"></a>末句</h3><ol>\n<li>That’s why we cannot afford to omit this phenomenon.</li>\n<li>sb. make sense in saying that …</li>\n</ol>\n<h2 id=\"第三段\"><a href=\"#第三段\" class=\"headerlink\" title=\"第三段\"></a>第三段</h2><p>From the previous discussion we can safely(万无一失的) come to the conclusion that 主题 is a <u>blessing(福) / curse(祸)</u> in more ways than one. It is high time(是时候做某事了) we cultivated(培养) a better awareness of it and channeled(引导) actions in the light of concrete circumstances(实事求是地展开行动). Bearing the previous points in mind(牢记于心), we can embrace a brighter future(营造一个光辉的未来),</p>\n<h1 id=\"图表作文\"><a href=\"#图表作文\" class=\"headerlink\" title=\"图表作文\"></a>图表作文</h1><h2 id=\"常用表达\"><a href=\"#常用表达\" class=\"headerlink\" title=\"常用表达\"></a>常用表达</h2><ul>\n<li>图标可总称为 graph</li>\n</ul>\n<h2 id=\"结构\"><a href=\"#结构\" class=\"headerlink\" title=\"结构\"></a>结构</h2><ol>\n<li>引入：描述——（破题）</li>\n<li>主体：主题——三条——结论</li>\n<li>同漫画</li>\n</ol>\n<h2 id=\"常用词\"><a href=\"#常用词\" class=\"headerlink\" title=\"常用词\"></a>常用词</h2><ul>\n<li>增加：increase, go up, incline(缓慢增加), 暴增：rocket, soar, explode</li>\n<li>减少：decrease, go down, decline, 暴跌：plunge, dwindle, shrink, sink</li>\n<li>不变：remain stable, level out(或off), remain unchanged, remain fixed</li>\n<li>波动：fluctuate, there were ipps and downs</li>\n<li>转向：the trend reversed</li>\n<li>变速：speed up, slow down; acceletare, decelerate</li>\n<li>变化程度：<ul>\n<li>大：dramatically</li>\n<li>中：considerably</li>\n<li>小：marginally</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"柱状图与曲线\"><a href=\"#柱状图与曲线\" class=\"headerlink\" title=\"柱状图与曲线\"></a>柱状图与曲线</h2><h3 id=\"常用表达-1\"><a href=\"#常用表达-1\" class=\"headerlink\" title=\"常用表达\"></a>常用表达</h3><ul>\n<li>可能描述的是变化和对比</li>\n<li>bar chart 柱状图</li>\n<li>curve 曲线图</li>\n</ul>\n<h3 id=\"模板\"><a href=\"#模板\" class=\"headerlink\" title=\"模板\"></a>模板</h3><p>As is illustrated(=demonstrated) in the graph, A 变量 （1）</p>\n<h4 id=\"过去式\"><a href=\"#过去式\" class=\"headerlink\" title=\"过去式\"></a>过去式</h4><ul>\n<li>增加: (过去式) from 数值1 to 数值2 <u>during the span of xx years / from 1998 to 2008</u>.</li>\n<li>减少: (过去式) 同上</li>\n<li>不变: stayed at 数值. Then the trend reversed / it picked up speed, finishing at 数值 at 时间.</li>\n</ul>\n<h4 id=\"例-2\"><a href=\"#例-2\" class=\"headerlink\" title=\"例\"></a>例</h4><p>As is graphically illustrated in the bar chart ,  domestic cars increased from 25% to about 30%. On the controry, Japanese cars has dwindled from 35% to 25% in Chinese market. What’s more, the American brand remained stable at 15%.</p>\n<p>As is graphically illustrated in the bar chart, the percentage of democratic cars in China’s automobile market increased considerably from 25% to 35 around(=some=appoximately=roughly) 33% during the twelve months from 2008 to 2009. On the contrary, the proportion of Japanese brands dropped from 35% to 25%. During the same time, the percentage of American cars remained stable at approximately 15%.</p>\n<p>As is pespicuously demonstrated in the bar chart senior students with part-time jobs accounted for 88.24% of the forth grade, which is the highest proportion of all groups. It is followed by that of juniors at 71.93%, and sophomores, 71.33%. Within expectation, the lowest proportion occurred in freshman at 67.77%.</p>\n<h2 id=\"饼状图与表格\"><a href=\"#饼状图与表格\" class=\"headerlink\" title=\"饼状图与表格\"></a>饼状图与表格</h2><h3 id=\"常用表达-2\"><a href=\"#常用表达-2\" class=\"headerlink\" title=\"常用表达\"></a>常用表达</h3><ul>\n<li>描述的比例</li>\n<li>pie chart 饼状图</li>\n<li>table 表格</li>\n</ul>\n<h3 id=\"模板-1\"><a href=\"#模板-1\" class=\"headerlink\" title=\"模板\"></a>模板</h3><p>As is illustrated in the graph, A变量 accounted(=demonstrated) for the highest proportion of 图标主题 at x%, followed by B变量 at y%, and C, z%.</p>\n<h4 id=\"例-3\"><a href=\"#例-3\" class=\"headerlink\" title=\"例\"></a>例</h4><p>As … , enjoying scenery accounted for the highest proportion of purpose for traveling of students in a university.</p>\n<p>As is perspicuously demonstrated in the pie chart, enjoying beautiful scenery accounted for(=make up=constitude) the highest proportion at 37% of all the students’ purpose for traveling in one university, followed by relieving pressure at 33%. Besides, making friends constituted 15%, and cultivatingindependent ability, 9%.</p>\n<h2 id=\"第一段第二句-破题\"><a href=\"#第一段第二句-破题\" class=\"headerlink\" title=\"第一段第二句(破题)\"></a>第一段第二句(破题)</h2><ul>\n<li>Actually / undoubtedly, the chart depicts a prevalent phenomenon / heated topic, namely(即), 主题.</li>\n</ul>\n<h2 id=\"第二段-1\"><a href=\"#第二段-1\" class=\"headerlink\" title=\"第二段\"></a>第二段</h2><h3 id=\"第一句-主题句\"><a href=\"#第一句-主题句\" class=\"headerlink\" title=\"第一句(主题句)\"></a>第一句(主题句)</h3><ul>\n<li>Several factors, to my way of thinking, can be easily found to account for the phenomenon among which I would like to name three most significant ones as follows.</li>\n</ul>\n<h3 id=\"分论点一-1\"><a href=\"#分论点一-1\" class=\"headerlink\" title=\"分论点一\"></a>分论点一</h3><p>At the first place, there is no denying that the erer-accelerating pace of our life and the improvement of our living standards have come to characterize(塑造) one’s <u>working / living / learning</u> habit, which in turn led to the <u>marked  change of(重大的变化) / diversified stance(不同的立场)</u> on 主题.</p>\n<h3 id=\"分论点二-1\"><a href=\"#分论点二-1\" class=\"headerlink\" title=\"分论点二\"></a>分论点二</h3><p>Moreover, that numermous individuals have been blessed with(很多人被保佑拥有) <u>concrete / academic / physical</u> benefits from 主题 also conduced to(导致) the <u>trend / situation</u>. </p>\n<h3 id=\"分论点三-1\"><a href=\"#分论点三-1\" class=\"headerlink\" title=\"分论点三\"></a>分论点三</h3><p>Still, what cannot be neglected is that the <u>government incentives(政府的推动作用) / pressure from all sides(来自各方面的压力) / eagerness to try new things(想尝试新事物的渴望)</u> served as a momentous driving force(作为一个重大的推动力) of it.</p>\n<h3 id=\"第二段末句\"><a href=\"#第二段末句\" class=\"headerlink\" title=\"第二段末句\"></a>第二段末句</h3><p>As it is a miniature(缩影) of life in this day and age, we can by no means afford to omit it.</p>\n<h2 id=\"第三段-1\"><a href=\"#第三段-1\" class=\"headerlink\" title=\"第三段\"></a>第三段</h2><h3 id=\"第一句-1\"><a href=\"#第一句-1\" class=\"headerlink\" title=\"第一句\"></a>第一句</h3><p>From the previous discussin we can safely come to the conclusion that (<u>current trend / the multiple choices / diverse considerations</u>)  of 主题 will continue to influence all aspects of our life / study / work in the long run,</p>\n<h3 id=\"第二句-1\"><a href=\"#第二句-1\" class=\"headerlink\" title=\"第二句\"></a>第二句</h3><p>It is high time we clutivated a better awareness of it and channeled actions in the light of concrete facts.Bearing the previous points in my mind, we can enjoy our life happily and meaningfully / come to the best decisions within no time.</p>\n","categories":["文学"],"tags":["英语"]},{"title":"通过API自动更新Cloudflare的DNS解析-Go语言版本","url":"https://littleghost2016.github.io/2019/12/11/通过API自动更新Cloudflare的DNS解析-Go语言版本/","content":"<h1 id=\"功能\"><a href=\"#功能\" class=\"headerlink\" title=\"功能\"></a>功能</h1><ul>\n<li><input checked disabled type=\"checkbox\"> 调用Cloudflare（下称CF）API查询域名对应的identifier和ip</li>\n<li><input checked disabled type=\"checkbox\"> 查询本地2001段IPv6地址</li>\n<li><input checked disabled type=\"checkbox\"> 通过爬虫查询路由器中的10.173段IPv4地址</li>\n<li><input checked disabled type=\"checkbox\"> 对比ip判断是否需要调用CF的API更新ip</li>\n<li><input checked disabled type=\"checkbox\"> 在Windows上设置任务计划，定时执行二进制文件</li>\n</ul>\n<h1 id=\"网络信息说明\"><a href=\"#网络信息说明\" class=\"headerlink\" title=\"网络信息说明\"></a>网络信息说明</h1><ul>\n<li>实验室路由器翼讯拨号，路由器分配<code>10.173</code>段内网IPv4地址，做端口转发。电脑被分配<code>192.168</code>段地址，但这个内网不是我想要的地址。</li>\n<li>直连校园网，被分配<code>2001</code>段IPv6地址。</li>\n</ul>\n<h1 id=\"代码结构\"><a href=\"#代码结构\" class=\"headerlink\" title=\"代码结构\"></a>代码结构</h1><figure class=\"highlight go\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 初始化http请求的client端以复用</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">initiateHttpClient</span><span class=\"params\">()</span> *<span class=\"title\">http</span>.<span class=\"title\">Client</span></span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 通过HTTP的GET请求获取identifier和ip</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">getIdentifierAndIp</span><span class=\"params\">(name <span class=\"keyword\">string</span>, dnsType <span class=\"keyword\">string</span>, httpClient *http.Client)</span> <span class=\"params\">(identifier <span class=\"keyword\">string</span>, ip <span class=\"keyword\">string</span>, err error)</span></span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取本机的IPv4和IPv6地址</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">getNativeIp</span><span class=\"params\">(ipType <span class=\"keyword\">string</span>)</span> <span class=\"params\">(ip <span class=\"keyword\">string</span>, err error)</span></span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 检查ip是否需要更新</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">checkIp</span><span class=\"params\">(identifier <span class=\"keyword\">string</span>, ip <span class=\"keyword\">string</span>, ipType <span class=\"keyword\">string</span>, httpClient *http.Client)</span> <span class=\"params\">(nativeIp <span class=\"keyword\">string</span>, updateFlag <span class=\"keyword\">bool</span>)</span></span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 通过HTTP的PUT请求更新ip</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">updateCloudflareDns</span><span class=\"params\">(identifier <span class=\"keyword\">string</span>, name <span class=\"keyword\">string</span>, dnsType <span class=\"keyword\">string</span>, ip <span class=\"keyword\">string</span>, httpClient *http.Client)</span> <span class=\"params\">(err error)</span></span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 程序入口</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"工作流程\"><a href=\"#工作流程\" class=\"headerlink\" title=\"工作流程\"></a>工作流程</h1><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">graph TD</span><br><span class=\"line\">A(开始) --&gt; B[初始化HTTPClient]</span><br><span class=\"line\">B --&gt; C[通过HTTP的GET请求获取identifier和ip]</span><br><span class=\"line\">B --&gt; D&#123;获取本地地址&#125;</span><br><span class=\"line\">D --&gt; |IPv4| E[模拟登录路由器获取地址]</span><br><span class=\"line\">D --&gt; |IPv6| F[调用Go语言net库提取地址]</span><br><span class=\"line\">C --&gt; G</span><br><span class=\"line\">E --&gt; G&#123;对比ip判断是否需要更新&#125;</span><br><span class=\"line\">F --&gt; G</span><br><span class=\"line\">G --&gt; |需要| H[通过HTTP的PUT请求更新ip]</span><br><span class=\"line\">G --&gt; |不需要| I(结束)</span><br><span class=\"line\">H --&gt; I</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"%E6%B5%81%E7%A8%8B%E5%9B%BE.png\" alt=\"流程图\"></p>\n<h1 id=\"Cloudflare的API中涉及的几个参数\"><a href=\"#Cloudflare的API中涉及的几个参数\" class=\"headerlink\" title=\"Cloudflare的API中涉及的几个参数\"></a>Cloudflare的API中涉及的几个参数</h1><h2 id=\"AccountID-用户ID\"><a href=\"#AccountID-用户ID\" class=\"headerlink\" title=\"AccountID - 用户ID\"></a>AccountID - 用户ID</h2><p><img src=\"AccountID-0.png\" alt></p>\n<p><img src=\"AccountID-1.png\" alt></p>\n<h2 id=\"ZoneID-域名ID\"><a href=\"#ZoneID-域名ID\" class=\"headerlink\" title=\"ZoneID - 域名ID\"></a>ZoneID - 域名ID</h2><p><img src=\"ZoneID-0.png\" alt></p>\n<h2 id=\"identifier-子域名ID\"><a href=\"#identifier-子域名ID\" class=\"headerlink\" title=\"identifier - 子域名ID\"></a>identifier - 子域名ID</h2><p>可通过<code>GET</code>请求获得，参考<code>getIdentifierAndIp</code>函数部分</p>\n<h2 id=\"API-Key\"><a href=\"#API-Key\" class=\"headerlink\" title=\"API-Key\"></a>API-Key</h2><p><img src=\"API-Key.png\" alt=\"API-Key\"></p>\n<h1 id=\"设置Win10任务计划定时执行程序\"><a href=\"#设置Win10任务计划定时执行程序\" class=\"headerlink\" title=\"设置Win10任务计划定时执行程序\"></a>设置Win10任务计划定时执行程序</h1><h2 id=\"常规设置\"><a href=\"#常规设置\" class=\"headerlink\" title=\"常规设置\"></a>常规设置</h2><p><img src=\"%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92-%E5%B8%B8%E8%A7%84.png\" alt=\"常规\"></p>\n<h2 id=\"新建触发器\"><a href=\"#新建触发器\" class=\"headerlink\" title=\"新建触发器\"></a>新建触发器</h2><p><img src=\"%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92-%E6%96%B0%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8.png\" alt=\"新建触发器\"></p>\n<h2 id=\"新建操作\"><a href=\"#新建操作\" class=\"headerlink\" title=\"新建操作\"></a>新建操作</h2><p><img src=\"%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92-%E6%96%B0%E5%BB%BA%E6%93%8D%E4%BD%9C.png\" alt=\"新建操作\"></p>\n<h2 id=\"设置\"><a href=\"#设置\" class=\"headerlink\" title=\"设置\"></a>设置</h2><p><img src=\"%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92-%E8%AE%BE%E7%BD%AE.png\" alt=\"设置\"></p>\n<h2 id=\"启用所有任务历史记录\"><a href=\"#启用所有任务历史记录\" class=\"headerlink\" title=\"启用所有任务历史记录\"></a>启用所有任务历史记录</h2><p><img src=\"%E4%BB%BB%E5%8A%A1%E8%AE%A1%E5%88%92-%E4%BB%BB%E5%8A%A1%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95.png\" alt=\"任务历史记录\"></p>\n<p>刚开始设置计划任务后，除非以手动点击的方式程序才会运行一次后一直处在“准备就绪”的状态，其他时间即使过了所设置的时间点，任务也不会执行。在与<a href=\"https://github.com/canbaoafeizai\" target=\"_blank\" rel=\"noopener\">@caibaoafeizai</a>一起研究几十分钟后，貌似在打开第五步的“启用所有任务历史记录”后正常了，具体原因我们也没排查出来，汗…</p>\n<h1 id=\"值得注意的点\"><a href=\"#值得注意的点\" class=\"headerlink\" title=\"值得注意的点\"></a>值得注意的点</h1><ol>\n<li>HTTP的请求方式全部为大写，如<code>GET</code> <code>POST</code> <code>PUT</code> <code>HEAD</code>。代码中我受Go语言本身的影响，一个地方把<code>GET</code>写成了<code>Get</code>（Go的命名方式一般为可外调函数的首字母大写），CF请求总是返回<code>400</code>，错误排查了我半个小时…</li>\n<li>获取本机IPv4的方式为模拟登录路由器管理页面获取内容，获取本机IPv6的方式为调用Go语言net库提取地址。</li>\n<li>实验室路由器<code>产品型号：TL-WDR7660千兆版</code>，登陆未使用<code>cookie</code>机制，而是在模拟登录后返回一个<code>stok</code>，后续可通过在url中加入这个参数获取内容。且获取路由器工作信息的方式为向<a href=\"http://192.168.1.1/stok=XXX/ds\" target=\"_blank\" rel=\"noopener\">http://192.168.1.1/stok=XXX/ds</a> <code>POST</code>一个body为<code>{&quot;network&quot;:{&quot;name&quot;:[&quot;wan_status&quot;]},&quot;method&quot;:&quot;get&quot;}</code>的数据，返回信息为<code>json</code>格式的结果。</li>\n</ol>\n<h1 id=\"代码部分\"><a href=\"#代码部分\" class=\"headerlink\" title=\"代码部分\"></a>代码部分</h1><p>因代码主要功能为自用，就不单独上传Github仓库了</p>\n<figure class=\"highlight go\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> (</span><br><span class=\"line\">\t<span class=\"string\">\"bytes\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"encoding/json\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"fmt\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"io/ioutil\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"log\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"net\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"net/http\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"net/http/cookiejar\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"regexp\"</span></span><br><span class=\"line\">\t<span class=\"string\">\"strings\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"string\">\"github.com/tidwall/gjson\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> (</span><br><span class=\"line\">\tZONE_IDENTIFIER = <span class=\"string\">\"XXX\"</span></span><br><span class=\"line\">\tXAuthEmail      = <span class=\"string\">\"XXX\"</span></span><br><span class=\"line\">\tXAuthKey        = <span class=\"string\">\"XXX\"</span></span><br><span class=\"line\">)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 初始化http请求的client端以复用</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">initiateHttpClient</span><span class=\"params\">()</span> *<span class=\"title\">http</span>.<span class=\"title\">Client</span></span> &#123;</span><br><span class=\"line\">\tclient := &amp;http.Client&#123;&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> client</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 通过HTTP的GET请求获取identifier和ip</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">getIdentifierAndIp</span><span class=\"params\">(name <span class=\"keyword\">string</span>, dnsType <span class=\"keyword\">string</span>, httpClient *http.Client)</span> <span class=\"params\">(identifier <span class=\"keyword\">string</span>, ip <span class=\"keyword\">string</span>, err error)</span></span> &#123;</span><br><span class=\"line\">\tdnsRecordsListUrl := fmt.Sprintf(<span class=\"string\">\"https://api.cloudflare.com/client/v4/zones/%s/dns_records?name=%s.littleghost.ml&amp;type=%s\"</span>, ZONE_IDENTIFIER, name, dnsType)</span><br><span class=\"line\">\trequest, err := http.NewRequest(<span class=\"string\">\"GET\"</span>, dnsRecordsListUrl, <span class=\"literal\">nil</span>) <span class=\"comment\">// 写的时候GET写成了Get，导致网页返回400，排除错误用了我半个小时...</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Print(err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>, <span class=\"string\">\"\"</span>, err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\trequest.Header.Add(<span class=\"string\">\"X-Auth-Email\"</span>, XAuthEmail)</span><br><span class=\"line\">\trequest.Header.Add(<span class=\"string\">\"X-Auth-Key\"</span>, XAuthKey)</span><br><span class=\"line\">\trequest.Header.Add(<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"application/json\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">\tresponse, err := httpClient.Do(request)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Print(err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>, <span class=\"string\">\"\"</span>, err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> response.Body.Close()</span><br><span class=\"line\"></span><br><span class=\"line\">\tbody, err := ioutil.ReadAll(response.Body)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Print(err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>, <span class=\"string\">\"\"</span>, err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tresult := gjson.Get(<span class=\"keyword\">string</span>(body), <span class=\"string\">\"result\"</span>).Array()[<span class=\"number\">0</span>].String() <span class=\"comment\">// 结果是gjson.Result</span></span><br><span class=\"line\">\tid := gjson.Get(result, <span class=\"string\">\"id\"</span>).String()</span><br><span class=\"line\">\tip = gjson.Get(result, <span class=\"string\">\"content\"</span>).String()</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> id, ip, <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 获取本机的IPv4和IPv6地址</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">getNativeIp</span><span class=\"params\">(ipType <span class=\"keyword\">string</span>)</span> <span class=\"params\">(ip <span class=\"keyword\">string</span>, err error)</span></span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> ipType == <span class=\"string\">\"ipv4\"</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tjar, _ := cookiejar.New(<span class=\"literal\">nil</span>)</span><br><span class=\"line\">\t\thttpClient := &amp;http.Client&#123;</span><br><span class=\"line\">\t\t\tJar: jar,</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\tloginUrl := <span class=\"string\">\"http://192.168.1.1/\"</span></span><br><span class=\"line\">\t\treq, _ := http.NewRequest(<span class=\"string\">\"POST\"</span>, loginUrl, strings.NewReader(<span class=\"string\">`&#123;\"method\":\"do\",\"login\":&#123;\"password\":\"XXX\"&#125;&#125;`</span>))</span><br><span class=\"line\">\t\tres, httpError := httpClient.Do(req)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> httpError != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Print(httpError)</span><br><span class=\"line\">\t\t\terr = httpError</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">defer</span> res.Body.Close()</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tbody, _ := ioutil.ReadAll(res.Body)</span><br><span class=\"line\">\t\tstok := gjson.Get(<span class=\"keyword\">string</span>(body), <span class=\"string\">\"stok\"</span>).String()</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tcontentUrl := fmt.Sprintf(<span class=\"string\">\"http://192.168.1.1/stok=%s/ds\"</span>, stok)</span><br><span class=\"line\">\t\treq, _ = http.NewRequest(<span class=\"string\">\"POST\"</span>, contentUrl, strings.NewReader(<span class=\"string\">`&#123;\"network\":&#123;\"name\":[\"wan_status\"]&#125;,\"method\":\"get\"&#125;`</span>))</span><br><span class=\"line\">\t\tres, httpError = httpClient.Do(req)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> httpError != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tlog.Print(httpError)</span><br><span class=\"line\">\t\t\terr = httpError</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">defer</span> res.Body.Close()</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tbody, _ = ioutil.ReadAll(res.Body)</span><br><span class=\"line\">\t\tip = gjson.Get(<span class=\"keyword\">string</span>(body), <span class=\"string\">\"network\"</span>).Get(<span class=\"string\">\"wan_status\"</span>).Get(<span class=\"string\">\"ipaddr\"</span>).String()</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> ip, <span class=\"literal\">nil</span></span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ipType == <span class=\"string\">\"ipv6\"</span> &#123;</span><br><span class=\"line\">\t\taddrs, err := net.InterfaceAddrs()</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tfmt.Println(err)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>, err</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> _, address := <span class=\"keyword\">range</span> addrs &#123;</span><br><span class=\"line\">\t\t\tipnet, ok := address.(*net.IPNet)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> ok &amp;&amp; !ipnet.IP.IsLoopback() &#123;</span><br><span class=\"line\">\t\t\t\tip = ipnet.IP.String()</span><br><span class=\"line\">\t\t\t\tmatchFlag, err := regexp.MatchString(<span class=\"string\">\"2001\"</span>, ip)</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\t\t\tfmt.Println(err)</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">return</span> <span class=\"string\">\"\"</span>, err</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> ip != <span class=\"string\">\"\"</span> &amp;&amp; matchFlag &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> ip, <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 检查ip是否需要更新</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">checkIp</span><span class=\"params\">(identifier <span class=\"keyword\">string</span>, ip <span class=\"keyword\">string</span>, ipType <span class=\"keyword\">string</span>, httpClient *http.Client)</span> <span class=\"params\">(nativeIp <span class=\"keyword\">string</span>, updateFlag <span class=\"keyword\">bool</span>)</span></span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> ipType == <span class=\"string\">\"ipv4\"</span> &#123;</span><br><span class=\"line\">\t\tnativeIpv4, err := getNativeIp(<span class=\"string\">\"ipv4\"</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tfmt.Println(err)</span><br><span class=\"line\">\t\t\tupdateFlag = <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> ip != nativeIpv4 &#123;</span><br><span class=\"line\">\t\t\tnativeIp = nativeIpv4</span><br><span class=\"line\">\t\t\tupdateFlag = <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ipType == <span class=\"string\">\"ipv6\"</span> &#123;</span><br><span class=\"line\">\t\tnativeIpv6, err := getNativeIp(<span class=\"string\">\"ipv6\"</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\t\tfmt.Println(err)</span><br><span class=\"line\">\t\t\tupdateFlag = <span class=\"literal\">false</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> ip != nativeIpv6 &#123;</span><br><span class=\"line\">\t\t\tnativeIp = nativeIpv6</span><br><span class=\"line\">\t\t\tupdateFlag = <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 通过HTTP的PUT请求更新ip</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">updateCloudflareDns</span><span class=\"params\">(identifier <span class=\"keyword\">string</span>, name <span class=\"keyword\">string</span>, dnsType <span class=\"keyword\">string</span>, ip <span class=\"keyword\">string</span>, httpClient *http.Client)</span> <span class=\"params\">(err error)</span></span> &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">type</span> updateDnsPostForm <span class=\"keyword\">struct</span> &#123;</span><br><span class=\"line\">\t\tName    <span class=\"keyword\">string</span> <span class=\"string\">`json:\"name\"`</span></span><br><span class=\"line\">\t\tDnsType <span class=\"keyword\">string</span> <span class=\"string\">`json:\"type\"`</span></span><br><span class=\"line\">\t\tContent <span class=\"keyword\">string</span> <span class=\"string\">`json:\"content\"`</span></span><br><span class=\"line\">\t\tTtl     <span class=\"keyword\">int</span>    <span class=\"string\">`json:\"ttl\"`</span></span><br><span class=\"line\">\t\tProxied <span class=\"keyword\">bool</span>   <span class=\"string\">`json:\"proxied\"`</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tupdateDnsUrl := fmt.Sprintf(<span class=\"string\">\"https://api.cloudflare.com/client/v4/zones/%s/dns_records/%s\"</span>, ZONE_IDENTIFIER, identifier)</span><br><span class=\"line\"></span><br><span class=\"line\">\tpostForm := updateDnsPostForm&#123;</span><br><span class=\"line\">\t\tName:    name,</span><br><span class=\"line\">\t\tDnsType: dnsType,</span><br><span class=\"line\">\t\tContent: ip,</span><br><span class=\"line\">\t\tTtl:     <span class=\"number\">1</span>,</span><br><span class=\"line\">\t\tProxied: <span class=\"literal\">false</span>,</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tpostBody, err := json.Marshal(postForm)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Print(err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\trequest, err := http.NewRequest(<span class=\"string\">\"PUT\"</span>, updateDnsUrl, bytes.NewBuffer(postBody))</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Print(err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\trequest.Header.Add(<span class=\"string\">\"X-Auth-Email\"</span>, XAuthEmail)</span><br><span class=\"line\">\trequest.Header.Add(<span class=\"string\">\"X-Auth-Key\"</span>, XAuthKey)</span><br><span class=\"line\">\trequest.Header.Add(<span class=\"string\">\"Content-Type\"</span>, <span class=\"string\">\"application/json\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">\tresponse, err := httpClient.Do(request)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Print(err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">defer</span> response.Body.Close()</span><br><span class=\"line\"></span><br><span class=\"line\">\tbody, err := ioutil.ReadAll(response.Body)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tlog.Print(err)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> err</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tfmt.Println(<span class=\"keyword\">string</span>(body))</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"literal\">nil</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 程序入口</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">func</span> <span class=\"title\">main</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">\thttpClient := initiateHttpClient()</span><br><span class=\"line\">\tidentifier, ip, err := getIdentifierAndIp(<span class=\"string\">\"lab6\"</span>, <span class=\"string\">\"AAAA\"</span>, httpClient)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">\"Can't get identifier\"</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tnativeIp, updateFlag := checkIp(identifier, ip, <span class=\"string\">\"ipv6\"</span>, httpClient)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> updateFlag &#123;</span><br><span class=\"line\">\t\tupdateCloudflareDns(identifier, <span class=\"string\">\"lab6\"</span>, <span class=\"string\">\"AAAA\"</span>, nativeIp, httpClient)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tidentifier, ip, err = getIdentifierAndIp(<span class=\"string\">\"lab\"</span>, <span class=\"string\">\"A\"</span>, httpClient)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">\t\tfmt.Println(<span class=\"string\">\"Can't get identifier\"</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\tnativeIp, updateFlag = checkIp(identifier, ip, <span class=\"string\">\"ipv4\"</span>, httpClient)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> updateFlag &#123;</span><br><span class=\"line\">\t\tupdateCloudflareDns(identifier, <span class=\"string\">\"lab\"</span>, <span class=\"string\">\"A\"</span>, nativeIp, httpClient)</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n","categories":["技术"],"tags":["dns","golang","爬虫"]},{"title":"使用TunnelBroker为bandwagon配置6in4","url":"https://littleghost2016.github.io/2019/12/01/使用TunnelBroker为bandwagon配置6in4/","content":"<p>VPS套餐只提供ipv4地址，无ipv6，使用<code>TunnelBroker</code>搭建6in4隧道，获取可使用的ipv6地址。</p>\n<h1 id=\"注册配置TunnelBroker\"><a href=\"#注册配置TunnelBroker\" class=\"headerlink\" title=\"注册配置TunnelBroker\"></a>注册配置TunnelBroker</h1><h2 id=\"注册\"><a href=\"#注册\" class=\"headerlink\" title=\"注册\"></a>注册</h2><p><a href=\"https://www.tunnelbroker.net/register.php\" target=\"_blank\" rel=\"noopener\">注册网址</a>，除了<code>username</code> <code>password</code> <code>email</code> 其他我是随便写的，包括<code>phone</code>，并没有做审核信息审查。</p>\n<h2 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h2><ol>\n<li><p>点击左侧<a href=\"https://www.tunnelbroker.net/new_tunnel.php\" target=\"_blank\" rel=\"noopener\">Create Regular Tunnel</a></p>\n<p><img src=\"CreateRegularTunnel.png\" alt=\"CreateRegularTunnel\"></p>\n</li>\n<li><p>上方输入VPS的公网ipv4地址，下方选择隧道接入点，默认是洛杉矶。<img src=\"CreateNewTunnel.png\" alt=\"CreateNewTunnel\"></p>\n</li>\n<li><p>在<code>ipv6 tunnel</code>页面可查看自己的信息，包括ipv4、ipv6地址。<img src=\"IPV6Tunnel.png\" alt=\"IPV6Tunnel\"></p>\n</li>\n<li><p>在<code>Example Configurations</code>页面选择自己VPS的操作系统，下面回给出后续操作模板。我的是Ubuntu系统，所以根据提示应该修改网络配置文件。<img src=\"ExampleConfigurations.png\" alt=\"Example Configurations\"></p>\n</li>\n</ol>\n<h1 id=\"VPS配置\"><a href=\"#VPS配置\" class=\"headerlink\" title=\"VPS配置\"></a>VPS配置</h1><ol>\n<li><p>修改文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/network/interfaces</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在下面添加<code>Example Configurations</code>页面的内容，直接复制粘贴即可。<img src=\"etc_network_interfaces.png\" alt=\"/etc/network/interfaces\"></p>\n</li>\n<li><p>重启网络服务（可能会有些慢，我等待了大概10-15秒）</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo systemctl restart networking.service</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>查看ip显示已有ipv6地址</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ ip a</span><br></pre></td></tr></table></figure>\n\n<p>其中蓝色箭头指示已有的ipv4地址，红色箭头指示新的ipv6地址<img src=\"ip_a.png\" alt=\"ip a\"></p>\n</li>\n<li><p>可以使用<code>ping</code>命令检测是否已可以使用ipv6网络<img src=\"ping6_google.com.png\" alt=\"ping6 google.com\"></p>\n<p>速度还挺快的！</p>\n</li>\n</ol>\n","categories":["技术"],"tags":["ipv6","6in4","TunnelBroker","linux"]},{"title":"重装vps","url":"https://littleghost2016.github.io/2019/11/13/重装vps/","content":"<h1 id=\"总体工作\"><a href=\"#总体工作\" class=\"headerlink\" title=\"总体工作\"></a>总体工作</h1><h2 id=\"工作列表\"><a href=\"#工作列表\" class=\"headerlink\" title=\"工作列表\"></a>工作列表</h2><ul>\n<li><input checked disabled type=\"checkbox\"> 重装系统ubuntu18.04</li>\n<li><input checked disabled type=\"checkbox\"> 旧域名更换为新域名<a href=\"www.littleghost.ml\">littleghost.ml</a></li>\n<li><input checked disabled type=\"checkbox\"> Web服务器由<code>Nginx</code>切换为<code>Caddy</code><ul>\n<li>实际使用的caddy为<code>caddy2Beta20</code>版本（当前最新），启动命令和caddyfile与1.X版本有不小的差别。</li>\n</ul>\n</li>\n<li><input checked disabled type=\"checkbox\"> 部署<code>V2ray</code>服务<ul>\n<li>模式为WebSocket + TLS，并未使用CDN。</li>\n</ul>\n</li>\n<li><input checked disabled type=\"checkbox\"> <code>caddy</code>和<code>v2ray</code>均使用<code>systemd</code>做进程守护。</li>\n<li><input checked disabled type=\"checkbox\"> 通知小伙伴们重装期间无法提供服务，且原域名基本不再使用。</li>\n<li><input disabled type=\"checkbox\"> 编写自动安装和升级caddy和v2ray的脚本。</li>\n</ul>\n<h2 id=\"整体文件布局\"><a href=\"#整体文件布局\" class=\"headerlink\" title=\"整体文件布局\"></a>整体文件布局</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">/etc/systemd/system</span><br><span class=\"line\">├── caddy.service</span><br><span class=\"line\">└── v2ray.service</span><br><span class=\"line\"></span><br><span class=\"line\">/home/ubuntu/program</span><br><span class=\"line\">├── caddy</span><br><span class=\"line\">│   ├── bin</span><br><span class=\"line\">│   │   ├── caddy</span><br><span class=\"line\">│   ├── config</span><br><span class=\"line\">│   │   └── caddyfile</span><br><span class=\"line\">│   └── ssl</span><br><span class=\"line\">│       ├── acme</span><br><span class=\"line\">│       ├── locks</span><br><span class=\"line\">│       └── ocsp</span><br><span class=\"line\">└── v2ray</span><br><span class=\"line\">    ├── bin</span><br><span class=\"line\">    │   ├── v2ctl</span><br><span class=\"line\">    │   ├── v2ray</span><br><span class=\"line\">    ├── config</span><br><span class=\"line\">    │   ├── v2ray.service</span><br><span class=\"line\">    │   └── config.json</span><br><span class=\"line\">    └── log</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"caddy\"><a href=\"#caddy\" class=\"headerlink\" title=\"caddy\"></a>caddy</h1><h2 id=\"文件布局\"><a href=\"#文件布局\" class=\"headerlink\" title=\"文件布局\"></a>文件布局</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ tree caddy -L 2</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">caddy</span><br><span class=\"line\">├── bin</span><br><span class=\"line\">│   ├── caddy</span><br><span class=\"line\">├── config</span><br><span class=\"line\">│   └── caddyfile</span><br><span class=\"line\">└── ssl</span><br><span class=\"line\">    ├── acme</span><br><span class=\"line\">    ├── locks</span><br><span class=\"line\">    └── ocsp</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"说明\"><a href=\"#说明\" class=\"headerlink\" title=\"说明\"></a>说明</h2><ol>\n<li>caddy包含1.X和2.0 beta 20两个版本的二进制执行文件和配置文件，两种版本都能够实现所需功能。</li>\n<li>1.0和2.0版本的配置文件和启动命令都不同。</li>\n<li>域名映射<ul>\n<li><code>www.littleghost.cn</code> –301–&gt; <code>littleghost2016.github.io</code></li>\n<li><code>blog.littleghost.ml</code> &amp; <code>www.littleghost.ml</code> 反向代理<code>littleghost2016.github.io</code></li>\n<li><code>blog.littleghost.ml/game</code> -&gt; 反向代理</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"caddy-2-0-beta20-版本\"><a href=\"#caddy-2-0-beta20-版本\" class=\"headerlink\" title=\"caddy 2.0 beta20 版本\"></a>caddy 2.0 beta20 版本</h2><p>推荐使用caddy的新版本。</p>\n<h3 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim ~/program/caddy/config/caddyfile</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">blog.littleghost.ml/game &#123;</span><br><span class=\"line\">    encode gzip zstd</span><br><span class=\"line\">    reverse_proxy localhost:your_port</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">blog.littleghost.ml, www.littleghost.ml &#123;</span><br><span class=\"line\">    tls 785340571@qq.com</span><br><span class=\"line\">    encode gzip zstd</span><br><span class=\"line\">    reverse_proxy &#123;</span><br><span class=\"line\">        to littleghost2016.github.io:443</span><br><span class=\"line\">        header_up Host &#123;http.reverse_proxy.upstream.host&#125;</span><br><span class=\"line\">        transport http &#123;</span><br><span class=\"line\">            tls</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">www.littleghost.cn &#123;</span><br><span class=\"line\">    tls 785340571@qq.com</span><br><span class=\"line\">    encode gzip zstd</span><br><span class=\"line\">    redir / https://littleghost2016.github.io</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"systemd进程守护配置\"><a href=\"#systemd进程守护配置\" class=\"headerlink\" title=\"systemd进程守护配置\"></a>systemd进程守护配置</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/systemd/system/caddy.service</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Caddy Server</span><br><span class=\"line\">After=syslog.target</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=root</span><br><span class=\"line\">Group=root</span><br><span class=\"line\">LimitNOFILE=64000</span><br><span class=\"line\">Environment=CADDYPATH=/home/ubuntu/program/caddy/ssl</span><br><span class=\"line\">ReadWriteDirectories=/home/ubuntu/program/caddy/ssl</span><br><span class=\"line\">ExecStart=/home/ubuntu/program/caddy/bin/caddy run --config /home/ubuntu/program/caddy/config/caddyfile --adapter caddyfile</span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<p>说明：</p>\n<ol>\n<li>使用非root用户不能绑定80和443端口，会提醒<code>permission denied!</code></li>\n<li>caddy的启动命令使用<code>run</code>，指定配置文件时使用<code>--config</code>，当caddy的配置文件格式与上述示例相同时，应该使用<code>--adapter caddyfile</code>。</li>\n<li>注意两个地方，否则SSL证书无法正常被caddy请求、下载和使用。<ul>\n<li>caddy的配置文件中域名不要写错</li>\n<li>DNS解析要解析到自己的服务器上</li>\n</ul>\n</li>\n</ol>\n<h1 id=\"v2ray\"><a href=\"#v2ray\" class=\"headerlink\" title=\"v2ray\"></a>v2ray</h1><h2 id=\"布局\"><a href=\"#布局\" class=\"headerlink\" title=\"布局\"></a>布局</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ tree v2ray -L 2</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">├── bin</span><br><span class=\"line\">│   ├── v2ctl</span><br><span class=\"line\">│   ├── v2ray</span><br><span class=\"line\">├── config</span><br><span class=\"line\">│   ├── v2ray.service</span><br><span class=\"line\">│   └── config.json</span><br><span class=\"line\">└── log</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"说明-1\"><a href=\"#说明-1\" class=\"headerlink\" title=\"说明\"></a>说明</h2><p>v2ray采用WebSocket + TLS的组合，并未使用CDN（Cloudflare的CDN感觉有一些水土不服，国内的没找到免费的）。</p>\n<h2 id=\"v2ray-4-22-1\"><a href=\"#v2ray-4-22-1\" class=\"headerlink\" title=\"v2ray 4.22.1\"></a>v2ray 4.22.1</h2><h3 id=\"配置文件-1\"><a href=\"#配置文件-1\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ vim ~/program/v2ray/config/config.json</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;log&quot;: &#123;</span><br><span class=\"line\">        &quot;loglevel&quot;: &quot;error&quot;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &quot;api&quot;: &#123;</span><br><span class=\"line\">        &quot;tag&quot;: &quot;api&quot;,</span><br><span class=\"line\">        &quot;services&quot;: [</span><br><span class=\"line\">            &quot;HandlerService&quot;,</span><br><span class=\"line\">            &quot;LoggerService&quot;,</span><br><span class=\"line\">            &quot;StatsService&quot;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &quot;stats&quot;: &#123;&#125;,</span><br><span class=\"line\">    &quot;inbounds&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            &quot;tag&quot;: &quot;proxy&quot;,</span><br><span class=\"line\">            &quot;port&quot;: your_port,</span><br><span class=\"line\">            &quot;protocol&quot;: &quot;vmess&quot;,</span><br><span class=\"line\">            &quot;settings&quot;: &#123;</span><br><span class=\"line\">                &quot;clients&quot;: [</span><br><span class=\"line\">                    &#123;</span><br><span class=\"line\">                        &quot;id&quot;: &quot;your_uuid&quot;,</span><br><span class=\"line\">                        &quot;level&quot;: 1,</span><br><span class=\"line\">                        &quot;alterId&quot;: 10</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                ]</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            &quot;streamSettings&quot;: &#123;</span><br><span class=\"line\">                &quot;network&quot;: &quot;ws&quot;,</span><br><span class=\"line\">                &quot;wsSettings&quot;: &#123;</span><br><span class=\"line\">                    &quot;path&quot;: &quot;/game&quot;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    &quot;outbounds&quot;: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            &quot;protocol&quot;: &quot;freedom&quot;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    &quot;routing&quot;: &#123;</span><br><span class=\"line\">        &quot;rules&quot;: [</span><br><span class=\"line\">            &#123;</span><br><span class=\"line\">                &quot;type&quot;: &quot;field&quot;,</span><br><span class=\"line\">                &quot;inboundTag&quot;: [</span><br><span class=\"line\">                    &quot;api&quot;</span><br><span class=\"line\">                ],</span><br><span class=\"line\">                &quot;outboundTag&quot;: &quot;api&quot;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        ],</span><br><span class=\"line\">        &quot;strategy&quot;: &quot;rules&quot;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &quot;policy&quot;: &#123;</span><br><span class=\"line\">        &quot;levels&quot;: &#123;</span><br><span class=\"line\">            &quot;0&quot;: &#123;</span><br><span class=\"line\">                &quot;statsUserUplink&quot;: true,</span><br><span class=\"line\">                &quot;statsUserDownlink&quot;: true</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &quot;system&quot;: &#123;</span><br><span class=\"line\">            &quot;statsInboundUplink&quot;: true,</span><br><span class=\"line\">            &quot;statsInboundDownlink&quot;: true</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>说明：</p>\n<ol>\n<li><p>可以在写完json文件后使用<code>v2ray --test XXX.json</code>命令检查配置文件是否存在错误。</p>\n</li>\n<li><p>配置文件参考了</p>\n<blockquote>\n<p>博客 <a href=\"https://www.huiyingwu.com/438/\" target=\"_blank\" rel=\"noopener\">利用 Caddy 轻松实现反向代理/镜像（支持自签SSL证书）</a></p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"systemd进程守护配置-1\"><a href=\"#systemd进程守护配置-1\" class=\"headerlink\" title=\"systemd进程守护配置\"></a>systemd进程守护配置</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/systemd/system/v2ray.service</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=V2Ray Service</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\">Wants=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\"># This service runs as root. You may consider to run it as another use for security concerns.</span><br><span class=\"line\"># By uncommenting the following two lines, this service will run as user v2ray/v2ray.</span><br><span class=\"line\"># More discussion at https://github.com/v2ray/v2ray-core/issues/1011</span><br><span class=\"line\">User=ubuntu</span><br><span class=\"line\">Group=ubuntu</span><br><span class=\"line\">Type=simple</span><br><span class=\"line\">PIDFile=/var/run/v2ray.pid</span><br><span class=\"line\">ExecStart=/home/ubuntu/program/v2ray/bin/v2ray -config /home/ubuntu/program/v2ray/config/config.json</span><br><span class=\"line\">Restart=on-failure</span><br><span class=\"line\"></span><br><span class=\"line\"># Don&apos;t restart in the case of configuration error</span><br><span class=\"line\">RestartPreventExitStatus=23</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"自用bash脚本\"><a href=\"#自用bash脚本\" class=\"headerlink\" title=\"自用bash脚本\"></a>自用bash脚本</h1><p><del>目前还没写完-_-||，等自己忙完这段时间且交上了作业再继续写吧，暂时被锁住了…貌似锁的死死的…</del></p>\n<p>疫情在家效率太低了…</p>\n<h1 id=\"吐槽\"><a href=\"#吐槽\" class=\"headerlink\" title=\"吐槽\"></a>吐槽</h1><p>ssh连接服务器延迟有点高，特别特别是晚上，要等待个2s左右，有时候直接断了，有点小烦…</p>\n<p><em>同宿舍室友说速度比以前快了一些，不知道是不是心理作用…</em></p>\n<p>目前家里是移动网 俗称墙内墙 网络确实有点差劲…</p>\n<h1 id=\"更新历史\"><a href=\"#更新历史\" class=\"headerlink\" title=\"更新历史\"></a>更新历史</h1><p>20191113_1603：初始版本</p>\n<p>20200328_2210：更新caddy2和v2ray部分配置，删除caddy1配置部分。脚本还没写，抽空填坑…</p>\n","categories":["技术"],"tags":["v2ray","caddy","bash"]},{"title":"学习grep","url":"https://littleghost2016.github.io/2019/11/05/学习grep/","content":"<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ grep [-acinv] [--color=auto] <span class=\"string\">'string'</span> filename</span><br></pre></td></tr></table></figure>\n\n<table>\n<thead>\n<tr>\n<th align=\"center\">参数</th>\n<th align=\"center\">注释</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">-a</td>\n<td align=\"center\">将二进制文件以字符串形式搜索</td>\n</tr>\n<tr>\n<td align=\"center\">-c</td>\n<td align=\"center\">计算搜索到目标字符串的次数</td>\n</tr>\n<tr>\n<td align=\"center\">-i</td>\n<td align=\"center\">无视大小写</td>\n</tr>\n<tr>\n<td align=\"center\">-n</td>\n<td align=\"center\">输出行号</td>\n</tr>\n<tr>\n<td align=\"center\">-v</td>\n<td align=\"center\">搜索不带目标字符串的结果</td>\n</tr>\n<tr>\n<td align=\"center\">–color=auto</td>\n<td align=\"center\">搜索到的关键字添加颜色</td>\n</tr>\n</tbody></table>\n","categories":["技术"],"tags":["linux"]},{"title":"git-stash学习","url":"https://littleghost2016.github.io/2019/11/04/git-stash学习/","content":"<h1 id=\"背景\"><a href=\"#背景\" class=\"headerlink\" title=\"背景\"></a>背景</h1><p>昨天继续部署<a href=\"https://github.com/hexojs/hexo\" target=\"_blank\" rel=\"noopener\">hexo</a>的时候发现自己使用的主题<a href=\"https://github.com/forsigner/fexo\" target=\"_blank\" rel=\"noopener\">fexo</a>在Github上有新的commit，于是想对主题进行升级。</p>\n<h1 id=\"更新仓库文件\"><a href=\"#更新仓库文件\" class=\"headerlink\" title=\"更新仓库文件\"></a>更新仓库文件</h1><p>查看fexo文件夹</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ tree -L 1 .</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">├── _config.yml</span><br><span class=\"line\">├── gulpfile.js</span><br><span class=\"line\">├── languages</span><br><span class=\"line\">├── layout</span><br><span class=\"line\">├── LICENSE</span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── README.md</span><br><span class=\"line\">├── scripts</span><br><span class=\"line\">├── source</span><br><span class=\"line\">└── yarn.lock</span><br></pre></td></tr></table></figure>\n\n<p>直接使用<code>git pull</code>命令发现<code>_config.yml</code>因被修改过而引起冲突，不能直接将仓库进行<code>pull</code>更新，上网搜索“hexo更新主题”，发现了<code>git stash</code>命令。</p>\n<ol>\n<li><p>使用<code>git stash</code>将修改入栈，即执行命令后<code>_config.yml</code>变成了该版本对应文件的最初始状态（因为我在修改<code>_config.yml</code>之后未进行追踪和提交，所以<code>git stash</code>后变成最初始状态）。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ git stash</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>此时执行<code>git status</code>发现没有任何更改。执行<code>git pull</code>更新仓库。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ git pull</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>执行<code>git stash pop</code>将已经入栈的被修改文件出栈到当前文件夹，即完成了保留<code>_config.yml</code>文件的修改，并更新了其他文件的效果。<em>此时栈为空。</em></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ git stash pop</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<h1 id=\"关于git-stash\"><a href=\"#关于git-stash\" class=\"headerlink\" title=\"关于git stash\"></a>关于git stash</h1><p> 能够将所有未提交的修改（工作区和暂存区）保存至堆栈中，用于后续恢复当前工作目录。 </p>\n<h2 id=\"git-stash-save-“test1”\"><a href=\"#git-stash-save-“test1”\" class=\"headerlink\" title=\"git stash save “test1”\"></a>git stash save “test1”</h2><p>作用同<code>git stash</code>，<code>save</code>会指定一个名称，<code>drop</code>命令可以根据名称删除对应内容。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">tash@&#123;0&#125;: On master: test1</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"git-stash-list\"><a href=\"#git-stash-list\" class=\"headerlink\" title=\"git stash list\"></a>git stash list</h2><p>查看当前stash中的内容。</p>\n<h2 id=\"git-stash-pop\"><a href=\"#git-stash-pop\" class=\"headerlink\" title=\"git stash pop\"></a>git stash pop</h2><p>当前stash中的最后进入的内容出栈，并应用到当前分支对应的工作目录上。<br> <em>注：该命令将堆栈中最近保存的内容删除（栈是先进后出）。</em> </p>\n<h2 id=\"git-stash-apply\"><a href=\"#git-stash-apply\" class=\"headerlink\" title=\"git stash apply\"></a>git stash apply</h2><p>恢复stash中的修改，但与<code>pop</code>不同的是，<code>apply</code>从栈中删除内容。</p>\n<h2 id=\"git-stash-drop-“test1”\"><a href=\"#git-stash-drop-“test1”\" class=\"headerlink\" title=\"git stash drop “test1”\"></a>git stash drop “test1”</h2><p>stash栈中删除名为”test1”的内容。</p>\n<h2 id=\"git-stash-clear\"><a href=\"#git-stash-clear\" class=\"headerlink\" title=\"git stash clear\"></a>git stash clear</h2><p>清除stash栈中的所有内容。</p>\n<h2 id=\"git-stash-show\"><a href=\"#git-stash-show\" class=\"headerlink\" title=\"git stash show\"></a>git stash show</h2><p>显示stash栈中的所有内容。</p>\n<h1 id=\"插一句：解决git中文乱码\"><a href=\"#插一句：解决git中文乱码\" class=\"headerlink\" title=\"插一句：解决git中文乱码\"></a>插一句：解决git中文乱码</h1><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ git config --global core.quotepath <span class=\"literal\">false</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"再插一句\"><a href=\"#再插一句\" class=\"headerlink\" title=\"再插一句\"></a>再插一句</h1><p><code>github-production-release-asset-2e65be.s3.amazonaws.com</code>国内是访问不了的，<code>wget</code>和<code>curl</code>都不能下载到内容，可绑定ip试试。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">52.216.20.147 github-production-release-asset-2e65be.s3.amazonaws.com</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><a href=\"https://github.com/oldj/SwitchHosts/issues/312\" target=\"_blank\" rel=\"noopener\">brew安装失败 #312</a></p>\n</blockquote>\n","categories":["技术"],"tags":["git","hexo"]},{"title":"树莓派搭建aria2+caddy+filebrowser","url":"https://littleghost2016.github.io/2019/11/02/树莓派搭建aria2+caddy+filebrowser/","content":"<p>树莓派为3B+，24小时供电，<em>就是有点吵</em>。</p>\n<h1 id=\"dnsmasq部分\"><a href=\"#dnsmasq部分\" class=\"headerlink\" title=\"dnsmasq部分\"></a>dnsmasq部分</h1><p>路由器为K2P，刷了Openwrt系统，自带<code>dnsmasq</code>，编辑配置文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ vim /etc/dnsmasq.conf</span><br></pre></td></tr></table></figure>\n\n<p>添加以下内容，三四两行自用于内网RDP，与本篇文章的内容无关</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">address=/download.com/192.168.2.198</span><br><span class=\"line\">address=/filebrowser.com/192.168.2.198</span><br><span class=\"line\">address=/mylab6.com/2001::XXXX</span><br><span class=\"line\">address=/mylab.com/10.173.XX.XX</span><br></pre></td></tr></table></figure>\n\n<p>重新启动<code>dnsmasq</code>服务</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ /etc/init.d/dnsmasq restart</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"caddy部分\"><a href=\"#caddy部分\" class=\"headerlink\" title=\"caddy部分\"></a>caddy部分</h1><blockquote>\n<p>   Caddy is praised by researchers and industry experts for its <strong>security defaults</strong> and <strong>unparalleled usability</strong>. ——by <a href=\"https://caddyserver.com/\" target=\"_blank\" rel=\"noopener\">caddyserver</a></p>\n</blockquote>\n<p><code>caddy</code>配置文件简洁，可简单地实现<code>HTTPS</code>功能。本次因想尝试新程序而未使用<code>Nginx</code>。</p>\n<ol>\n<li><p>从官网下载<code>caddy</code>二进制文件</p>\n</li>\n<li><p>使用<code>systemd</code>作进程守护</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/systemd/system/caddy.service</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=Caddy Server</span><br><span class=\"line\">After=syslog.target</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=root</span><br><span class=\"line\">Group=root</span><br><span class=\"line\">LimitNOFILE=64000</span><br><span class=\"line\">ExecStart=/home/ubuntu/caddy/caddy -log stdout -agree=true -conf=/home/ubuntu/caddy/config/Caddyfile -root=/home/ubuntu/caddy/www</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<p><em>搭建过程中使用ubuntu作为User和Group会报错，尚未解决。</em></p>\n</li>\n<li><p>编辑配置文件<code>Caddyfile</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">http://download.com:80 &#123;</span><br><span class=\"line\">        root /home/ubuntu/caddy/www/download.com</span><br><span class=\"line\">        gzip</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">http://filebrowser.com:80 &#123;</span><br><span class=\"line\">        proxy / 127.0.0.1:7001</span><br><span class=\"line\">        gzip</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><code>download.com</code>使用AriaNG，<code>filebrowser</code>则反代端口，因服务目前只架设在内网，均只是用HTTP服务。caddy配置文件确实简洁。</p>\n</li>\n</ol>\n<h1 id=\"aria2部分\"><a href=\"#aria2部分\" class=\"headerlink\" title=\"aria2部分\"></a>aria2部分</h1><h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo apt install aria2</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ tree .</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">├── config</span><br><span class=\"line\">│   ├── aria2.conf</span><br><span class=\"line\">│   └── aria2.session</span><br><span class=\"line\">└── downloads</span><br><span class=\"line\">    ├── a</span><br><span class=\"line\">    │   └── 1</span><br><span class=\"line\">    ├── b</span><br><span class=\"line\">    │   ├── 2</span><br><span class=\"line\">    │   └── 3</span><br><span class=\"line\">    ├── c</span><br><span class=\"line\">    │   └── 4</span><br><span class=\"line\">    ├── d</span><br><span class=\"line\">    │   └── 5</span><br><span class=\"line\">    └── e</span><br><span class=\"line\"></span><br><span class=\"line\">7 directories, 7 files</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"使用systemd作进程守护\"><a href=\"#使用systemd作进程守护\" class=\"headerlink\" title=\"使用systemd作进程守护\"></a>使用<code>systemd</code>作进程守护</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/systemd/system/aria2.service</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=aria2c -- file download manager</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">User=ubuntu</span><br><span class=\"line\">Group=ubuntu</span><br><span class=\"line\">#WorkingDirectory=%h</span><br><span class=\"line\">#Environment=VAR=/var/%i</span><br><span class=\"line\">ExecStart=/usr/bin/aria2c -D --conf-path=/home/ubuntu/aria2/config/aria2.conf</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ vim /home/ubuntu/aria2/config/aria2.conf</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#RPC</span></span><br><span class=\"line\"><span class=\"built_in\">enable</span>-rpc=<span class=\"literal\">true</span></span><br><span class=\"line\">rpc-allow-origin-all=<span class=\"literal\">true</span></span><br><span class=\"line\">rpc-listen-all=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#rpc-listen-port=6800</span></span><br><span class=\"line\"><span class=\"comment\">#require &amp;gt;1.15.2</span></span><br><span class=\"line\"><span class=\"comment\">#rpc-user=ftp</span></span><br><span class=\"line\"><span class=\"comment\">#rpc-passwd=ftp123</span></span><br><span class=\"line\">rpc-secret=XXX</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#RATE</span></span><br><span class=\"line\">max-concurrent-downloads=5</span><br><span class=\"line\"><span class=\"built_in\">continue</span>=<span class=\"literal\">true</span></span><br><span class=\"line\">max-connection-per-server=5</span><br><span class=\"line\">min-split-size=10M</span><br><span class=\"line\">split=10</span><br><span class=\"line\">max-overall-download-limit=0</span><br><span class=\"line\">max-download-limit=0</span><br><span class=\"line\">max-overall-upload-limit=0</span><br><span class=\"line\">max-upload-limit=0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#B</span></span><br><span class=\"line\"><span class=\"comment\">#PROGRESS</span></span><br><span class=\"line\">input-file=/home/ubuntu/aria2/config/aria2.session</span><br><span class=\"line\">save-session=/home/ubuntu/aria2/config/aria2.session</span><br><span class=\"line\"><span class=\"comment\">#require &amp;gt;1.16.1</span></span><br><span class=\"line\">save-session-interval=120</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#DISK</span></span><br><span class=\"line\">dir=/home/ubuntu/aria2/downloads</span><br><span class=\"line\">file-allocation=prealloc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#BT</span></span><br><span class=\"line\">bt-enable-lpd=<span class=\"literal\">true</span></span><br><span class=\"line\">bt-max-peers=80</span><br><span class=\"line\">bt-require-crypto=<span class=\"literal\">true</span></span><br><span class=\"line\">follow-torrent=<span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#listen-port=6881-6999</span></span><br><span class=\"line\"><span class=\"built_in\">enable</span>-dht=<span class=\"literal\">false</span></span><br><span class=\"line\">bt-enable-lpd=<span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"built_in\">enable</span>-peer-exchange=<span class=\"literal\">false</span></span><br><span class=\"line\">peer-agent=uTorrent/2210(25130)</span><br><span class=\"line\">user-agent=uTorrent/2210(25130)</span><br><span class=\"line\">peer-id-prefix=-UT2210-</span><br><span class=\"line\">seed-ratio=0</span><br><span class=\"line\">force-save=<span class=\"literal\">true</span></span><br><span class=\"line\">bt-hash-check-seed=<span class=\"literal\">true</span></span><br><span class=\"line\">bt-seed-unverified=<span class=\"literal\">true</span></span><br><span class=\"line\">bt-save-metadata=<span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">listen-port=50000-65000</span><br></pre></td></tr></table></figure>\n\n<p>HTTP可以，校内PT站可以下载，但公网上的种子和磁力链接都是<code>0/0</code>，尚未解决。</p>\n<h1 id=\"filebrowser部分\"><a href=\"#filebrowser部分\" class=\"headerlink\" title=\"filebrowser部分\"></a>filebrowser部分</h1><ol>\n<li><p>从<code>Github</code>下载二进制文件</p>\n</li>\n<li><p>使用<code>systemd</code>作进程守护</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=File Browser</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">User=ubuntu</span><br><span class=\"line\">Group=ubuntu</span><br><span class=\"line\">ExecStart=/home/ubuntu/filebrowser/filebrowser -d /home/ubuntu/filebrowser/filebrowser.db</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ tree .</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">├── caddy</span><br><span class=\"line\">├── caddy_v1.0.3_linux_arm64.tar.gz</span><br><span class=\"line\">├── config</span><br><span class=\"line\">│   ├── Caddyfile</span><br><span class=\"line\">│   └── Caddyfile.bak</span><br><span class=\"line\">├── init</span><br><span class=\"line\">│   ├── README.md</span><br><span class=\"line\">│   ├── freebsd</span><br><span class=\"line\">│   │   ├── README.md</span><br><span class=\"line\">│   │   └── caddy</span><br><span class=\"line\">│   ├── linux-systemd</span><br><span class=\"line\">│   │   ├── README.md</span><br><span class=\"line\">│   │   └── caddy.service</span><br><span class=\"line\">│   ├── linux-sysvinit</span><br><span class=\"line\">│   │   ├── README.md</span><br><span class=\"line\">│   │   └── caddy</span><br><span class=\"line\">│   ├── linux-upstart</span><br><span class=\"line\">│   │   ├── README.md</span><br><span class=\"line\">│   │   ├── caddy.conf</span><br><span class=\"line\">│   │   ├── caddy.conf.centos-6</span><br><span class=\"line\">│   │   └── caddy.conf.ubuntu-12.04</span><br><span class=\"line\">│   └── mac-launchd</span><br><span class=\"line\">│       ├── README.md</span><br><span class=\"line\">│       └── com.caddyserver.web.plist</span><br><span class=\"line\">├── ssl</span><br><span class=\"line\">└── www</span><br><span class=\"line\">    └── download.com</span><br><span class=\"line\">        ├── AriaNg-1.1.4.zip</span><br><span class=\"line\">        ├── LICENSE</span><br><span class=\"line\">        ├── css</span><br><span class=\"line\">        │   ├── aria-ng-2a46099f8c.min.css</span><br><span class=\"line\">        │   ├── bootstrap-3.4.1.min.css</span><br><span class=\"line\">        │   └── plugins-9b678dd4f5.min.css</span><br><span class=\"line\">        ├── favicon.ico</span><br><span class=\"line\">        ├── favicon.png</span><br><span class=\"line\">        ├── fonts</span><br><span class=\"line\">        │   ├── fontawesome-webfont.eot</span><br><span class=\"line\">        │   ├── fontawesome-webfont.svg</span><br><span class=\"line\">        │   ├── fontawesome-webfont.ttf</span><br><span class=\"line\">        │   ├── fontawesome-webfont.woff</span><br><span class=\"line\">        │   └── fontawesome-webfont.woff2</span><br><span class=\"line\">        ├── index.html</span><br><span class=\"line\">        ├── index.manifest</span><br><span class=\"line\">        ├── js</span><br><span class=\"line\">        │   ├── angular-packages-1.6.10.min.js</span><br><span class=\"line\">        │   ├── aria-ng-994a2d3441.min.js</span><br><span class=\"line\">        │   ├── bootstrap-3.4.1.min.js</span><br><span class=\"line\">        │   ├── echarts-common-3.8.5.min.js</span><br><span class=\"line\">        │   ├── jquery-3.3.1.min.js</span><br><span class=\"line\">        │   ├── moment-with-locales-2.24.0.min.js</span><br><span class=\"line\">        │   └── plugins-01928ba731.min.js</span><br><span class=\"line\">        ├── langs</span><br><span class=\"line\">        │   ├── zh_Hans.txt</span><br><span class=\"line\">        │   └── zh_Hant.txt</span><br><span class=\"line\">        ├── robots.txt</span><br><span class=\"line\">        ├── tileicon.png</span><br><span class=\"line\">        └── touchicon.png</span><br><span class=\"line\"></span><br><span class=\"line\">14 directories, 43 files</span><br></pre></td></tr></table></figure>\n\n</li>\n</ol>\n<p><em>对于<code>filebrowser</code>当使用<code>Firefox</code>浏览器时，请关闭“允许页面选择自己的字体代替您的上述选择”，否则会出现网页字体混乱的场景。</em></p>\n<p><img src=\"%E6%9B%BF%E6%8D%A2%E5%AD%97%E4%BD%93.png\" alt=\"替换字体\"></p>\n","categories":["树莓派"],"tags":["树莓派","aria2","caddy","filebrowser"]},{"title":"树莓派使用清华源","url":"https://littleghost2016.github.io/2019/11/02/树莓派使用清华源/","content":"<blockquote>\n<p> Welcome to Ubuntu 19.10 (GNU/Linux 5.3.0-1014-raspi2 aarch64)</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/apt/sources.list.d/tsinghua.source.list</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 默认注释了源码镜像以提高 apt update 速度如有需要可自行取消注释</span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ eoan main restricted universe multiverse</span><br><span class=\"line\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ eoan main restricted universe multiverse</span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ eoan-updates main restricted universe multiverse</span><br><span class=\"line\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ eoan-updates main restricted universe multiverse</span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ eoan-backports main restricted universe multiverse</span><br><span class=\"line\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ eoan-backports main restricted universe multiverse</span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ eoan-security main restricted universe multiverse</span><br><span class=\"line\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ eoan-security main restricted universe multiverse</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ uname -a</span><br><span class=\"line\">Linux ubuntu 5.3.0-1014-raspi2 <span class=\"comment\">#16-Ubuntu SMP Tue Nov 26 11:18:23 UTC 2019 aarch64 aarch64 aarch64 GNU/Linux</span></span><br></pre></td></tr></table></figure>\n\n","categories":[],"tags":["树莓派"]},{"title":"V2ray使用QUIC","url":"https://littleghost2016.github.io/2019/09/24/V2ray使用QUIC/","content":"<h1 id=\"配置文件\"><a href=\"#配置文件\" class=\"headerlink\" title=\"配置文件\"></a>配置文件</h1><p>服务端配置<code>config.json</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"log\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"access\"</span>: <span class=\"string\">\"/var/log/v2ray/access.log\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"error\"</span>: <span class=\"string\">\"/var/log/v2ray/error.log\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"loglevel\"</span>: <span class=\"string\">\"warning\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"inbound\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"port\"</span>: <span class=\"number\">11942</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"protocol\"</span>: <span class=\"string\">\"vmess\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"settings\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"clients\"</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          <span class=\"attr\">\"id\"</span>: <span class=\"string\">\"********-****-****-****-************\"</span>,</span><br><span class=\"line\">          <span class=\"attr\">\"alterId\"</span>: <span class=\"number\">64</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">\"streamSettings\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"network\"</span>: <span class=\"string\">\"quic\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"security\"</span>: <span class=\"string\">\"tls\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"quicSettings\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"security\"</span>: <span class=\"string\">\"aes-128-gcm\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"header\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"srtp\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"0\"</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"attr\">\"tlsSettings\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"serverName\"</span>: <span class=\"string\">\"quic.littleghost.cn\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"alpn\"</span>: [</span><br><span class=\"line\">          <span class=\"string\">\"http/1.1\"</span></span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"attr\">\"certificates\"</span>: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">\"certificateFile\"</span>: <span class=\"string\">\"/etc/nginx/certificate/1_quic.littleghost.cn_bundle.crt\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"keyFile\"</span>: <span class=\"string\">\"/etc/nginx/certificate/2_quic.littleghost.cn.key\"</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"outbound\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"protocol\"</span>: <span class=\"string\">\"freedom\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"settings\"</span>: &#123;&#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"outboundDetour\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"protocol\"</span>: <span class=\"string\">\"blackhole\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"settings\"</span>: &#123;&#125;,</span><br><span class=\"line\">      <span class=\"attr\">\"tag\"</span>: <span class=\"string\">\"blocked\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">\"routing\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"strategy\"</span>: <span class=\"string\">\"rules\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"settings\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"rules\"</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"field\"</span>,</span><br><span class=\"line\">          <span class=\"attr\">\"ip\"</span>: [</span><br><span class=\"line\">            <span class=\"string\">\"0.0.0.0/8\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"10.0.0.0/8\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"100.64.0.0/10\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"127.0.0.0/8\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"169.254.0.0/16\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"172.16.0.0/12\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"192.0.0.0/24\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"192.0.2.0/24\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"192.168.0.0/16\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"198.18.0.0/15\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"198.51.100.0/24\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"203.0.113.0/24\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"::1/128\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"fc00::/7\"</span>,</span><br><span class=\"line\">            <span class=\"string\">\"fe80::/10\"</span></span><br><span class=\"line\">          ],</span><br><span class=\"line\">          <span class=\"attr\">\"outboundTag\"</span>: <span class=\"string\">\"blocked\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>客户端配置<code>quicConfig.json</code></p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"log\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"access\"</span>: <span class=\"string\">\"D:\\\\Programs\\\\V2Ray\\\\v2rayN-Core\\\\log\\\\access.log\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"error\"</span>: <span class=\"string\">\"D:\\\\Programs\\\\V2Ray\\\\v2rayN-Core\\\\log\\\\error.log\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"loglevel\"</span>: <span class=\"string\">\"warning\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"inbounds\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"port\"</span>: <span class=\"number\">1080</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"protocol\"</span>: <span class=\"string\">\"socks\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"sniffing\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"enabled\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"destOverride\"</span>: [</span><br><span class=\"line\">          <span class=\"string\">\"http\"</span>,</span><br><span class=\"line\">          <span class=\"string\">\"tls\"</span></span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"attr\">\"settings\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"auth\"</span>: <span class=\"literal\">null</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">\"outbounds\"</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"protocol\"</span>: <span class=\"string\">\"vmess\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"settings\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"vnext\"</span>: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            <span class=\"attr\">\"address\"</span>: <span class=\"string\">\"quic.littleghost.cn\"</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"port\"</span>: <span class=\"number\">11942</span>,</span><br><span class=\"line\">            <span class=\"attr\">\"users\"</span>: [</span><br><span class=\"line\">              &#123;</span><br><span class=\"line\">                <span class=\"attr\">\"id\"</span>: <span class=\"string\">\"********-****-****-****-************\"</span>,</span><br><span class=\"line\">                <span class=\"attr\">\"alterId\"</span>: <span class=\"number\">64</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            ]</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"attr\">\"streamSettings\"</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">\"network\"</span>: <span class=\"string\">\"quic\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"security\"</span>: <span class=\"string\">\"tls\"</span>,</span><br><span class=\"line\">        <span class=\"attr\">\"tlsSettings\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">\"serverName\"</span>: <span class=\"string\">\"quic.littleghost.cn\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"attr\">\"quicSettings\"</span>: &#123;</span><br><span class=\"line\">          <span class=\"attr\">\"security\"</span>: <span class=\"string\">\"aes-128-gcm\"</span>,</span><br><span class=\"line\">          <span class=\"attr\">\"key\"</span>: <span class=\"string\">\"0\"</span>,</span><br><span class=\"line\">          <span class=\"attr\">\"header\"</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">\"type\"</span>: <span class=\"string\">\"srtp\"</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"最后想说的\"><a href=\"#最后想说的\" class=\"headerlink\" title=\"最后想说的\"></a>最后想说的</h1><ol>\n<li>刚开始服务端使用<code>Nginx</code>挂反向代理，不行，后来客户端直接连接端口，不经过<code>Nginx</code>。</li>\n<li>客户端软件<code>V2rayN</code>好像对<code>QUIC</code>的支持额…（也可能是我自己不会使用），对于出现<code>[missing port in address]</code>的问题，在客户端配置文件中加入以下配置语句。</li>\n</ol>\n<figure class=\"highlight\"><table><tr><td class=\"code\"><pre><span class=\"line\">\"tlsSettings\": &#123;</span><br><span class=\"line\">\t\"serverName\": \"quic.littleghost.cn\"</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><a href=\"https://github.com/v2ray/v2ray-core/issues/1536\" target=\"_blank\" rel=\"noopener\">Github Issues - Quic协议无法连接 #1536</a></p>\n</blockquote>\n<ol start=\"3\">\n<li>服务端不挂<code>Nginx</code>，客户端直接使用<code>v2ray -config XXX</code>的情况下，<code>QUIC</code>可以使用，但是速度极慢（访问404网站、非死不可一直不行，游兔箔可以访问但速度不佳，目测不如蜗牛爬行..）而且大概率连接失败，猜测运营商并不喜欢UDP :(</li>\n<li><del>个人目前使用的是<code>Nginx + WebSocket + TLS + CDN</code>，下一步准备尝试<code>Caddy + H2 + TLS + CDN</code>，看看效果如何，现在发烧有点难受…..</del>还有其他人需要使用现有配置，就先不动了…</li>\n</ol>\n<h1 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h1><p><a href=\"https://github.com/v2ray/v2ray-core/issues/1446\" target=\"_blank\" rel=\"noopener\">QUIC使用 aes-128-gcm 连接关闭 #1446</a></p>\n<p><a href=\"https://github.com/v2ray/v2ray-core/issues/1440\" target=\"_blank\" rel=\"noopener\">QUIC 无法连接 #1440</a></p>\n<p><a href=\"https://luke6887.me/?p=623\" target=\"_blank\" rel=\"noopener\">可能的v2ray的quic中继。。。</a></p>\n","categories":["技术"],"tags":["v2ray","quic"]},{"title":"写代码怎能不会这些Linux命令?","url":"https://littleghost2016.github.io/2019/08/22/写代码怎能不会这些Linux命令/","content":"<blockquote>\n<p>图片来自<a href=\"https://zhuanlan.zhihu.com/p/28674639\" target=\"_blank\" rel=\"noopener\">_王爵的技术小黑屋</a></p>\n</blockquote>\n<p><img src=\"%E5%86%99%E4%BB%A3%E7%A0%81%E6%80%8E%E8%83%BD%E4%B8%8D%E4%BC%9A%E8%BF%99%E4%BA%9BLinux%E5%91%BD%E4%BB%A4.jpg\" alt=\"写代码怎能不会这些Linux命令\"></p>\n","categories":[],"tags":["linux"]},{"title":"CPU、显卡天梯图","url":"https://littleghost2016.github.io/2019/07/31/CPU、显卡天梯图/","content":"<h1 id=\"CPU天梯图\"><a href=\"#CPU天梯图\" class=\"headerlink\" title=\"CPU天梯图\"></a>CPU天梯图</h1><p><img src=\"CPU%E5%A4%A9%E6%A2%AF%E5%9B%BE.jpg\" alt=\"CPU天梯图\"></p>\n<h1 id=\"移动端笔记本电脑显卡天梯图\"><a href=\"#移动端笔记本电脑显卡天梯图\" class=\"headerlink\" title=\"移动端笔记本电脑显卡天梯图\"></a>移动端笔记本电脑显卡天梯图</h1><p><img src=\"%E7%A7%BB%E5%8A%A8%E7%AB%AF%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%94%B5%E8%84%91%E6%98%BE%E5%8D%A1%E5%A4%A9%E6%A2%AF%E5%9B%BE.jpg\" alt=\"移动端笔记本电脑显卡天梯图\"></p>\n<h1 id=\"桌面级台式电脑显卡天梯图\"><a href=\"#桌面级台式电脑显卡天梯图\" class=\"headerlink\" title=\"桌面级台式电脑显卡天梯图\"></a>桌面级台式电脑显卡天梯图</h1><p><img src=\"%E6%A1%8C%E9%9D%A2%E7%BA%A7%E5%8F%B0%E5%BC%8F%E7%94%B5%E8%84%91%E6%98%BE%E5%8D%A1%E5%A4%A9%E6%A2%AF%E5%9B%BE.jpg\" alt=\"桌面级台式电脑显卡天梯图\"></p>\n","categories":["电脑"],"tags":["cpu","显卡"]},{"title":"树莓派使用无线连接网络","url":"https://littleghost2016.github.io/2019/07/15/树莓派使用无线连接网络/","content":"<h1 id=\"不使用netplan\"><a href=\"#不使用netplan\" class=\"headerlink\" title=\"不使用netplan\"></a>不使用netplan</h1><h2 id=\"1-安装工具\"><a href=\"#1-安装工具\" class=\"headerlink\" title=\"1. 安装工具\"></a>1. 安装工具</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo apt install ifupdown</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-修改-etc-network-interfaces文件\"><a href=\"#2-修改-etc-network-interfaces文件\" class=\"headerlink\" title=\"2. 修改/etc/network/interfaces文件\"></a>2. 修改<code>/etc/network/interfaces</code>文件</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/network/interfaces</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\"># ifupdown has been replaced by netplan(5) on this system.  See</span><br><span class=\"line\"># /etc/netplan for current configuration.</span><br><span class=\"line\"># To re-enable ifupdown on this system, you can run:</span><br><span class=\"line\">#    sudo apt install ifupdown</span><br><span class=\"line\"></span><br><span class=\"line\">auto wlan0</span><br><span class=\"line\">allow-hotplug wlan0</span><br><span class=\"line\">#iface wlan0 inet static</span><br><span class=\"line\">iface wlan0 inet dhcp</span><br><span class=\"line\">#       address 192.168.1.52</span><br><span class=\"line\">#       netmask 255.255.255.0</span><br><span class=\"line\">        wpa_conf /etc/wpa_supplicant/wpa_supplicant.conf</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-修改-etc-wpa-supplicant-wpa-supplicant-conf文件\"><a href=\"#3-修改-etc-wpa-supplicant-wpa-supplicant-conf文件\" class=\"headerlink\" title=\"3. 修改/etc/wpa_supplicant/wpa_supplicant.conf文件\"></a>3. 修改<code>/etc/wpa_supplicant/wpa_supplicant.conf</code>文件</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/wpa_supplicant/wpa_supplicant.conf</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">ctrl_interface=/var/run/wpa_supplicant</span><br><span class=\"line\">#ap_scan=1</span><br><span class=\"line\"></span><br><span class=\"line\">network=&#123;</span><br><span class=\"line\">       ssid=&quot;SSID&quot;</span><br><span class=\"line\">       scan_ssid=1</span><br><span class=\"line\">       psk=&quot;password&quot;</span><br><span class=\"line\">       priority=5</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-重启网卡\"><a href=\"#4-重启网卡\" class=\"headerlink\" title=\"4. 重启网卡\"></a>4. 重启网卡</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo ifdown wlan0</span><br></pre></td></tr></table></figure>\n\n<p>回显：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Killed old client process</span><br><span class=\"line\">Internet Systems Consortium DHCP Client 4.3.5</span><br><span class=\"line\">Copyright 2004-2016 Internet Systems Consortium.</span><br><span class=\"line\">All rights reserved.</span><br><span class=\"line\">For info, please visit https://www.isc.org/software/dhcp/</span><br><span class=\"line\"></span><br><span class=\"line\">Listening on LPF/wlan0/b8:27:eb:xx:xx:xx</span><br><span class=\"line\">Sending on   LPF/wlan0/b8:27:eb:xx:xx:xx</span><br><span class=\"line\">Sending on   Socket/fallback</span><br><span class=\"line\">DHCPRELEASE on wlan0 to 192.168.1.1 port 67 (xid=0x13ea153a)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo ifup wlan0</span><br></pre></td></tr></table></figure>\n\n<p>回显：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">Internet Systems Consortium DHCP Client 4.3.5</span><br><span class=\"line\">Copyright 2004-2016 Internet Systems Consortium.</span><br><span class=\"line\">All rights reserved.</span><br><span class=\"line\">For info, please visit https://www.isc.org/software/dhcp/</span><br><span class=\"line\"></span><br><span class=\"line\">Listening on LPF/wlan0/b8:27:eb:xx:xx:xx</span><br><span class=\"line\">Sending on   LPF/wlan0/b8:27:eb:xx:xx:xx</span><br><span class=\"line\">Sending on   Socket/fallback</span><br><span class=\"line\">DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 3 (xid=0xd0fcdd63)</span><br><span class=\"line\">DHCPDISCOVER on wlan0 to 255.255.255.255 port 67 interval 4 (xid=0xd0fcdd63)</span><br><span class=\"line\">DHCPREQUEST of 192.168.1.52 on wlan0 to 255.255.255.255 port 67 (xid=0x63ddfcd0)</span><br><span class=\"line\">DHCPOFFER of 192.168.1.52 from 192.168.1.1</span><br><span class=\"line\">DHCPACK of 192.168.1.52 from 192.168.1.1</span><br><span class=\"line\">bound to 192.168.1.52 -- renewal in 2147483648 seconds.</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-备注\"><a href=\"#5-备注\" class=\"headerlink\" title=\"5. 备注\"></a>5. 备注</h2><ul>\n<li>ap_scan<ul>\n<li>默认值为1</li>\n<li>1：总是先连接可见的WiFi，如果扫描完所有可见的网络之后都没有连接上，则开始连接隐藏WiFi。</li>\n<li>2：会按照network定义的顺序连接WiFi网络，遇到隐藏的将立刻开始连接，因此在这个模式下连接顺序不受priority影响</li>\n</ul>\n</li>\n<li>ctrl_interface<ul>\n<li>文件夹里面存的是一个当前使用的interface的socket文件，可以供其他程序使用读取WiFi状态信息</li>\n</ul>\n</li>\n<li>network<ul>\n<li>是一个连接一个WiFi网络的配置，可以有多个，wpa_supplicant会按照priority指定的优先级（数字越大越先连接）来连接，当然，在这个列表里面隐藏WiFi不受priority的影响，隐藏WiFi总是在可见WiFi不能连接时才开始连接。</li>\n<li>ssid：网络的ssid</li>\n<li>psk：密码</li>\n<li>priority：连接优先级，越大越优先</li>\n<li>scan_ssid：连接隐藏WiFi时需要指定该值为1</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"使用netplan\"><a href=\"#使用netplan\" class=\"headerlink\" title=\"使用netplan\"></a>使用netplan</h1><p>Ubuntu 18及以后的新系统使用netplan管理网络连接，不再使用interfaces。</p>\n<h2 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ vim /etc/netplan/50-cloud-init.yaml</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">network:</span></span><br><span class=\"line\"><span class=\"attr\">    ethernets:</span></span><br><span class=\"line\"><span class=\"attr\">        eth0:</span></span><br><span class=\"line\"><span class=\"attr\">            dhcp4:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">            optional:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">    wifis:</span></span><br><span class=\"line\"><span class=\"attr\">            wlan0:</span></span><br><span class=\"line\"><span class=\"attr\">                    dhcp4:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">                    dhcp6:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">                    access-points:</span></span><br><span class=\"line\">                            <span class=\"string\">\"WiFi名称\"</span><span class=\"string\">:</span></span><br><span class=\"line\"><span class=\"attr\">                                    password:</span> <span class=\"string\">\"密码\"</span></span><br><span class=\"line\"><span class=\"attr\">    version:</span> <span class=\"number\">2</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"应用更改\"><a href=\"#应用更改\" class=\"headerlink\" title=\"应用更改\"></a>应用更改</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ sudo netplan apply</span><br></pre></td></tr></table></figure>\n\n","categories":["树莓派"],"tags":["树莓派"]},{"title":"Markdown中使用Base64格式保存图片","url":"https://littleghost2016.github.io/2019/07/14/Markdown中使用Base64格式保存图片/","content":"<h1 id=\"压缩图片的网页\"><a href=\"#压缩图片的网页\" class=\"headerlink\" title=\"压缩图片的网页\"></a>压缩图片的网页</h1><p><a href=\"http://www.bejson.com/ui/compress_img/\" target=\"_blank\" rel=\"noopener\">http://www.bejson.com/ui/compress_img/</a></p>\n<h1 id=\"图片转Base64的网页\"><a href=\"#图片转Base64的网页\" class=\"headerlink\" title=\"图片转Base64的网页\"></a>图片转Base64的网页</h1><p><a href=\"http://imgbase64.duoshitong.com/\" target=\"_blank\" rel=\"noopener\">http://imgbase64.duoshitong.com/</a></p>\n<h1 id=\"Markdown中的使用格式\"><a href=\"#Markdown中的使用格式\" class=\"headerlink\" title=\"Markdown中的使用格式\"></a>Markdown中的使用格式</h1><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">其他内容</span><br><span class=\"line\"></span><br><span class=\"line\">![image][linkid1]</span><br><span class=\"line\"></span><br><span class=\"line\">其他内容</span><br><span class=\"line\"></span><br><span class=\"line\">[linkid1]: data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDACg...</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"例：\"><a href=\"#例：\" class=\"headerlink\" title=\"例：\"></a>例：</h1><p><img src=\"%E7%A4%BA%E4%BE%8B.jpg\" alt=\"示例\"></p>\n","categories":["技术"],"tags":["markdown","base64"]},{"title":"hexo的使用","url":"https://littleghost2016.github.io/2019/07/13/hexo的使用/","content":"<h1 id=\"安装Hexo\"><a href=\"#安装Hexo\" class=\"headerlink\" title=\"安装Hexo\"></a>安装Hexo</h1><h2 id=\"初始化文件夹\"><a href=\"#初始化文件夹\" class=\"headerlink\" title=\"初始化文件夹\"></a>初始化文件夹</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo init myblog</span><br><span class=\"line\"></span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> myblog</span><br><span class=\"line\">$ npm install</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装主题\"><a href=\"#安装主题\" class=\"headerlink\" title=\"安装主题\"></a>安装主题</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">clone</span> git@github.com:forsigner/fexo.git themes/fexo</span><br><span class=\"line\"></span><br><span class=\"line\">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"常用hexo命令\"><a href=\"#常用hexo命令\" class=\"headerlink\" title=\"常用hexo命令\"></a>常用hexo命令</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo g</span><br><span class=\"line\">$ hexo s</span><br><span class=\"line\">$ hexo d</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"迁移hexo需要移动的文件（夹）\"><a href=\"#迁移hexo需要移动的文件（夹）\" class=\"headerlink\" title=\"迁移hexo需要移动的文件（夹）\"></a>迁移<code>hexo</code>需要移动的文件（夹）</h2><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">_config.yml</span><br><span class=\"line\">package.json</span><br><span class=\"line\">scaffolds/</span><br><span class=\"line\">source/</span><br><span class=\"line\">themes/</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ npm install hexo-cli -g</span><br><span class=\"line\">$ npm install</span><br><span class=\"line\">$ npm install hexo-deployer-git --save  // 文章部署到 git 的模块</span><br></pre></td></tr></table></figure>\n\n","categories":["技术"],"tags":["hexo"]},{"title":"K2P同时校园网和翼讯","url":"https://littleghost2016.github.io/2019/07/11/K2P同时校园网和翼讯/","content":"<blockquote>\n<p><a href=\"http://rs.xidian.edu.cn/forum.php?mod=viewthread&tid=906698&highlight=ipv6\" target=\"_blank\" rel=\"noopener\">文章</a>原创为西电睿思的小忧伤，感谢大佬提供技术和文章授权！</p>\n<p>最后可以实现连入路由器的电脑端（或手机端）不需要任何配置即可使用ipv6，且不限制流量的使用ipv4。</p>\n</blockquote>\n<h1 id=\"1-设置校园网的账号密码\"><a href=\"#1-设置校园网的账号密码\" class=\"headerlink\" title=\"1.设置校园网的账号密码\"></a>1.设置校园网的账号密码</h1><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ uci <span class=\"built_in\">set</span> network.wan.proto=pppoe</span><br><span class=\"line\">$ uci <span class=\"built_in\">set</span> network.wan.username=学号</span><br><span class=\"line\">$ uci <span class=\"built_in\">set</span> network.wan.password=校园网密码</span><br><span class=\"line\">$ uci commit</span><br><span class=\"line\">$ /etc/init.d/network restart</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"2-更新软件源\"><a href=\"#2-更新软件源\" class=\"headerlink\" title=\"2.更新软件源\"></a>2.更新软件源</h1><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ opkg update &amp;&amp; opkg install kmod-ipt-nat6 &amp;&amp; opkg install kmod-macvlan &amp;&amp; opkg install iputils-tracepath6</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"3-连接虚拟链路\"><a href=\"#3-连接虚拟链路\" class=\"headerlink\" title=\"3.连接虚拟链路\"></a>3.连接虚拟链路</h1><p><code>eth1</code>就是连接外网的那根线，也就是wan口，后面出现的<code>eth1</code>同理换成自己的即可<br><em>不一样就换成自己的，到web页面<code>network-interface</code>里随便找一个点击edit，Physical Settings，就能看到wan口是什么</em></p>\n<p>然后执行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ ip link add link eth1 name veth1 <span class=\"built_in\">type</span> macvlan</span><br><span class=\"line\">$ ifconfig veth1 up</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"4-添加虚拟链路开机启动\"><a href=\"#4-添加虚拟链路开机启动\" class=\"headerlink\" title=\"4.添加虚拟链路开机启动\"></a>4.添加虚拟链路开机启动</h1><p><em>注意：这不是命令，需要添加到文件里</em></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ vim /etc/rc.local</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在最后一行exit 0之前添加以下内容</span></span><br><span class=\"line\">sleep 20</span><br><span class=\"line\">ip link add link eth1 name veth1 <span class=\"built_in\">type</span> macvlan</span><br><span class=\"line\">ifconfig veth1 up</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"5-添加一个新的wan口\"><a href=\"#5-添加一个新的wan口\" class=\"headerlink\" title=\"5.添加一个新的wan口\"></a>5.添加一个新的wan口</h1><p>可以在用户界面<code>Network-&gt;Interfaces&gt;Add new interface</code>添加新wan口，名字设置为<code>vwan1</code>，Protocol设置为<code>pppoe</code>，<code>interface</code>选择<code>veth1</code></p>\n<h1 id=\"6-在luci界面设置vwan1\"><a href=\"#6-在luci界面设置vwan1\" class=\"headerlink\" title=\"6.在luci界面设置vwan1\"></a>6.在luci界面设置vwan1</h1><p>设置<code>vwan1</code>拨号用户名和密码，同时设置Firewall Setting为<code>wan</code>口firewire zone，保存。</p>\n<p>这里<code>vwan1</code>设置的是翼讯的账号和密码，格式为<code>t学号@dx</code>，或者添加转换后的账号<a href=\"https://note286.github.io/yixun/\" target=\"_blank\" rel=\"noopener\">在线转换地址</a>。</p>\n<h1 id=\"7-设置默认网关\"><a href=\"#7-设置默认网关\" class=\"headerlink\" title=\"7.设置默认网关\"></a>7.设置默认网关</h1><p>将原来的<code>wan</code>口设置为非默认路由，<code>vwan1</code>设置为默认路由，也就是<strong>易迅走默认网关 校园网不走</strong>，这样ipv4就只走易迅了，在<code>network-interface</code>里选择网口后edit，Advanced Settings，<code>Use default gateway</code>这个选项，<strong>易迅勾选，校园网不勾选</strong>。</p>\n<h1 id=\"8-最后设置后台转发ipv6\"><a href=\"#8-最后设置后台转发ipv6\" class=\"headerlink\" title=\"8.最后设置后台转发ipv6\"></a>8.最后设置后台转发ipv6</h1><h2 id=\"1-网络配置\"><a href=\"#1-网络配置\" class=\"headerlink\" title=\"1.网络配置\"></a>1.网络配置</h2><p>最好用vim自己添加 有的最后好像没有空行<br>添加以下内容到<code>/etc/sysctl.conf</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ vim /etc/sysctl.conf</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 添加以下内容</span></span><br><span class=\"line\">net.ipv6.conf.default.accept_ra=2</span><br><span class=\"line\">net.ipv6.conf.all.accept_ra=2</span><br></pre></td></tr></table></figure>\n\n<p>然后执行以下命令</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ uci <span class=\"built_in\">set</span> network.globals.ula_prefix=<span class=\"string\">\"<span class=\"variable\">$(uci get network.globals.ula_prefix | sed 's/^./d/')</span>\"</span></span><br><span class=\"line\">$ uci commit network</span><br><span class=\"line\">$ uci <span class=\"built_in\">set</span> dhcp.lan.ra_default=<span class=\"string\">'1'</span></span><br><span class=\"line\">$ uci commit dhcp</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-添加nat6脚本\"><a href=\"#2-添加nat6脚本\" class=\"headerlink\" title=\"2.添加nat6脚本\"></a>2.添加nat6脚本</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ touch /etc/init.d/nat6</span><br><span class=\"line\">$ chmod +x /etc/init.d/nat6</span><br><span class=\"line\">$ vim /etc/init.d/nat6</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-脚本内容\"><a href=\"#3-脚本内容\" class=\"headerlink\" title=\"3.脚本内容\"></a>3.脚本内容</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/bin/sh /etc/rc.common</span></span><br><span class=\"line\">START=75</span><br><span class=\"line\">ip6tables -t nat -I POSTROUTING -s `uci get network.globals.ula_prefix` -j MASQUERADE</span><br><span class=\"line\">route -A inet6 add 2000::/3 `route -A inet6 | grep ::/0 | awk <span class=\"string\">'NR==1&#123;print \"gw \"$2\" dev \"$7&#125;'</span>`</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"9-启动并重启\"><a href=\"#9-启动并重启\" class=\"headerlink\" title=\"9.启动并重启\"></a>9.启动并重启</h1><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ /etc/init.d/nat6 <span class=\"built_in\">enable</span></span><br><span class=\"line\">$ reboot</span><br></pre></td></tr></table></figure>\n\n<p>最后，稍等几分钟就会有ipv6地址了，如果使用过程中发现ipv6没了，就到system-startup里找到<code>nat6</code>，重启路由器。可访问 <a href=\"http://test-ipv6.com/\" target=\"_blank\" rel=\"noopener\">http://test-ipv6.com/</a> 检测是否有ipv6地址。</p>\n<blockquote>\n<p>最后的最后，建议把<a href=\"https://raw.githubusercontent.com/googlehosts/hosts/master/hosts-files/hosts\" target=\"_blank\" rel=\"noopener\">hosts</a>添加到路由器里，这样所有设备就都可以用了，亲测iOS，安卓，macOS，win无线连接都可以使用ipv6，不需要额外配置。</p>\n</blockquote>\n","categories":[],"tags":["K2P"]},{"title":"zsh报错command not found compdef","url":"https://littleghost2016.github.io/2019/07/10/zsh报错command-not-found-compdef/","content":"<p>安装zsh后报错，解决方案：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ compaudit | xargs -I <span class=\"string\">'%'</span> chmod g-w,o-w <span class=\"string\">'%'</span></span><br><span class=\"line\">$ rm ~/.zcompdump*</span><br><span class=\"line\">$ <span class=\"built_in\">exec</span> zsh</span><br></pre></td></tr></table></figure>\n\n","categories":[],"tags":[]},{"title":"VMWare虚拟机“锁定文件失败解决方法”","url":"https://littleghost2016.github.io/2019/07/10/VMWare虚拟机“锁定文件失败解决方法”/","content":"<p>2019年07月10日 </p>\n<p>实验室突然断电导致开启虚拟机时报错<code>另一个程序已锁定文件的一部分</code>。</p>\n<h1 id=\"分析原因：\"><a href=\"#分析原因：\" class=\"headerlink\" title=\"分析原因：\"></a>分析原因：</h1><p>虚拟机在运行的过程中会锁定文件，以防止文件被修改。当出现突然断电或者本地系统崩溃时，虚拟机无法及时地解除对于虚拟机文件的锁定，当再次启动时就会出现如上现象。</p>\n<h1 id=\"解决方法：\"><a href=\"#解决方法：\" class=\"headerlink\" title=\"解决方法：\"></a>解决方法：</h1><p>将<code>.lck</code>结尾的文件夹删除。</p>\n","categories":[],"tags":["vmware"]},{"title":"Hello World","url":"https://littleghost2016.github.io/2019/07/09/hello-world/","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","categories":[],"tags":[]},{"title":"网络对抗原理复习整理","url":"https://littleghost2016.github.io/2018/08/20/网络对抗原理复习整理/","content":"<h1 id=\"nmap\"><a href=\"#nmap\" class=\"headerlink\" title=\"nmap\"></a>nmap</h1><ul>\n<li>oN/oX</li>\n</ul>\n<h1 id=\"ping\"><a href=\"#ping\" class=\"headerlink\" title=\"ping\"></a>ping</h1><ul>\n<li>-c</li>\n<li>-i</li>\n<li>-s</li>\n<li>-t</li>\n</ul>\n<h1 id=\"tcpdump\"><a href=\"#tcpdump\" class=\"headerlink\" title=\"tcpdump\"></a>tcpdump</h1><ul>\n<li><p>-i 使标准输出变为缓冲行形式 </p>\n</li>\n<li><p>-e 在输出行打印出数据链路层的头部信息，包括源mac和目的mac，以及网络层的协议 </p>\n</li>\n<li><p>-c</p>\n</li>\n<li><p>-w 包写入文件中，不打印</p>\n</li>\n<li><p>-n 域名转换成IP地址后显示 ，不把网络地址转换成名字 </p>\n</li>\n<li><p>-nn 每个监听到的数据包中的域名转换成IP、端口从应用名称转换成端口号 </p>\n</li>\n<li><p>-v[v] 输出详细的报文信息 </p>\n</li>\n<li><p>-X[X] 以16进制[ASCII]展示</p>\n</li>\n</ul>\n<h1 id=\"DDoS\"><a href=\"#DDoS\" class=\"headerlink\" title=\"DDoS\"></a>DDoS</h1><h2 id=\"条件\"><a href=\"#条件\" class=\"headerlink\" title=\"条件\"></a>条件</h2><ul>\n<li><p>不校验来源</p>\n</li>\n<li><p>返回比请求大</p>\n</li>\n</ul>\n<h2 id=\"例如\"><a href=\"#例如\" class=\"headerlink\" title=\"例如\"></a>例如</h2><ul>\n<li>NTP</li>\n<li>BT</li>\n<li>DNS</li>\n</ul>\n<h2 id=\"CC-过量访问\"><a href=\"#CC-过量访问\" class=\"headerlink\" title=\"CC/ 过量访问\"></a>CC/ 过量访问</h2><ul>\n<li>低于带宽，高于处理能力</li>\n</ul>\n<h2 id=\"清洗\"><a href=\"#清洗\" class=\"headerlink\" title=\"清洗\"></a>清洗</h2><h3 id=\"四层清洗\"><a href=\"#四层清洗\" class=\"headerlink\" title=\"四层清洗\"></a>四层清洗</h3><ul>\n<li><p>支持非 HTTP 流量</p>\n</li>\n<li><p>不需要 SSL 证书</p>\n</li>\n</ul>\n<h3 id=\"七层清洗\"><a href=\"#七层清洗\" class=\"headerlink\" title=\"七层清洗\"></a>七层清洗</h3><ul>\n<li>支持防 CC</li>\n<li>细粒度清洗</li>\n</ul>\n<h2 id=\"防御方法\"><a href=\"#防御方法\" class=\"headerlink\" title=\"防御方法\"></a>防御方法</h2><ul>\n<li>准备备用 IP （回源 IP ）</li>\n<li>配置回源 IP ACL ，白名单</li>\n<li>配置供应商高防 IP 与回源策略</li>\n<li>测试真实 IP 透传</li>\n<li>制定预案与响应策略</li>\n<li>演练</li>\n<li>供应商选择与商务谈判</li>\n</ul>\n<h1 id=\"SQLMAP\"><a href=\"#SQLMAP\" class=\"headerlink\" title=\"SQLMAP\"></a>SQLMAP</h1><h2 id=\"参数\"><a href=\"#参数\" class=\"headerlink\" title=\"参数\"></a>参数</h2><ul>\n<li>-r REQUESTFILE 从一个文件中载入HTTP请求 </li>\n<li>-level 执行测试的等级 </li>\n<li>-risk 执行测试的风险</li>\n<li>–current-user 检索数据库管理系统当前用户 </li>\n<li>-technique BEUST</li>\n<li>–time-sec=TIMESEC DBMS响应的延迟时间（默认为5秒） </li>\n<li>–dbms=DBMS 强制后端的DBMS为此值 </li>\n</ul>\n<h1 id=\"防御体系构建\"><a href=\"#防御体系构建\" class=\"headerlink\" title=\"防御体系构建\"></a>防御体系构建</h1><ul>\n<li>让系统更规范</li>\n<li>加强对信息的掌握</li>\n<li>安全评估</li>\n<li>入侵检测</li>\n<li>及时响应</li>\n</ul>\n<h1 id=\"渗透路径的启示\"><a href=\"#渗透路径的启示\" class=\"headerlink\" title=\"渗透路径的启示\"></a>渗透路径的启示</h1><h2 id=\"启示\"><a href=\"#启示\" class=\"headerlink\" title=\"启示\"></a>启示</h2><ul>\n<li>网络访问的隔离与限制</li>\n<li>漏洞的发现和利用</li>\n<li>账号与权限</li>\n</ul>\n<h2 id=\"分层\"><a href=\"#分层\" class=\"headerlink\" title=\"分层\"></a>分层</h2><ul>\n<li><p>客户端安全</p>\n</li>\n<li><p>网络与系统安全</p>\n</li>\n<li><p>应用安全</p>\n</li>\n<li><p>业务安全</p>\n</li>\n<li><p>数据安全</p>\n</li>\n</ul>\n<h2 id=\"安全域划分\"><a href=\"#安全域划分\" class=\"headerlink\" title=\"安全域划分\"></a>安全域划分</h2><table>\n<thead>\n<tr>\n<th align=\"center\">网络准入</th>\n<th>←</th>\n<th>外网</th>\n<th>←→</th>\n<th>端口管理</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">↓</td>\n<td></td>\n<td></td>\n<td></td>\n<td>↑↓</td>\n</tr>\n<tr>\n<td align=\"center\">办公网</td>\n<td>→</td>\n<td>跳板机</td>\n<td>→</td>\n<td>内网</td>\n</tr>\n</tbody></table>\n<h2 id=\"审计\"><a href=\"#审计\" class=\"headerlink\" title=\"审计\"></a>审计</h2><ul>\n<li>事前：风险评估、资格评估</li>\n<li>事中：入侵检测</li>\n<li>事后：追溯 + 制度</li>\n</ul>\n<h2 id=\"检测方式\"><a href=\"#检测方式\" class=\"headerlink\" title=\"检测方式\"></a>检测方式</h2><ul>\n<li><p>误用检测 - 黑名单</p>\n</li>\n<li><p>异常检测 - 白名单</p>\n</li>\n</ul>\n<h1 id=\"2018年安全事件\"><a href=\"#2018年安全事件\" class=\"headerlink\" title=\"2018年安全事件\"></a>2018年安全事件</h1><p>微信支付SDK的XXE漏洞，语言为JAVA，查看SDK给的README.md说明，其中表示在支付结果的回掉接口notify_url 处使用，向商户的notify_url接口发送dtd脏数据，商户服务器加载远程dtd文件，商户服务器将key值发送至attack服务器。漏洞本身只是很简单的XXE漏洞造成的任意文件读取，因为漏洞所处的关键业务点使得造成的损失巨大，但是由于notify_url的使用过程中客户全程并不参与，所以在我看来notify_url的获取方式是该漏洞破坏性的瓶颈。 </p>\n","categories":["技术"],"tags":["网络对抗原理"]},{"title":"无线网络安全复习整理","url":"https://littleghost2016.github.io/2018/07/16/无线网络安全复习整理/","content":"<h1 id=\"第一章\"><a href=\"#第一章\" class=\"headerlink\" title=\"第一章\"></a>第一章</h1><h2 id=\"7种主要安全威胁\"><a href=\"#7种主要安全威胁\" class=\"headerlink\" title=\"7种主要安全威胁\"></a>7种主要安全威胁</h2><p>窃听、篡改、伪装、重放、非授权访问、拒绝服务、否认。</p>\n<h2 id=\"3种无线通信攻击方式\"><a href=\"#3种无线通信攻击方式\" class=\"headerlink\" title=\"3种无线通信攻击方式\"></a>3种无线通信攻击方式</h2><p>无线窃听/假冒/篡改、信号重放、信号劫持。</p>\n<h2 id=\"不同协议层次安全防护措施\"><a href=\"#不同协议层次安全防护措施\" class=\"headerlink\" title=\"不同协议层次安全防护措施\"></a>不同协议层次安全防护措施</h2><table>\n<thead>\n<tr>\n<th align=\"center\">层次</th>\n<th align=\"center\">功能</th>\n<th align=\"center\">手段</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">应用层</td>\n<td align=\"center\">+访问控制</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">传输层</td>\n<td align=\"center\">+身份认证</td>\n<td align=\"center\">端到端加密</td>\n</tr>\n<tr>\n<td align=\"center\">网络层</td>\n<td align=\"center\">…</td>\n<td align=\"center\">端到端加密</td>\n</tr>\n<tr>\n<td align=\"center\">链路层</td>\n<td align=\"center\">+完整性、抗重放</td>\n<td align=\"center\">链路加密</td>\n</tr>\n<tr>\n<td align=\"center\">物理层</td>\n<td align=\"center\">机密性、抗干扰</td>\n<td align=\"center\">信道加密、跳频扩频</td>\n</tr>\n</tbody></table>\n<h2 id=\"不同网络安全防护措施\"><a href=\"#不同网络安全防护措施\" class=\"headerlink\" title=\"不同网络安全防护措施\"></a>不同网络安全防护措施</h2><table>\n<thead>\n<tr>\n<th align=\"center\">网络</th>\n<th align=\"center\">需求</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">蜂窝网</td>\n<td align=\"center\">+网络域安全</td>\n</tr>\n<tr>\n<td align=\"center\">无线局域网</td>\n<td align=\"center\">网络接入安全、用户域安全、应用域安全</td>\n</tr>\n<tr>\n<td align=\"center\">无线个域网</td>\n<td align=\"center\">无线传输安全</td>\n</tr>\n<tr>\n<td align=\"center\">无线自组网</td>\n<td align=\"center\">群组通信安全、动态组网安全</td>\n</tr>\n<tr>\n<td align=\"center\">异构无线网</td>\n<td align=\"center\">跨域接入安全、安全互联互通</td>\n</tr>\n</tbody></table>\n<h1 id=\"第二章\"><a href=\"#第二章\" class=\"headerlink\" title=\"第二章\"></a>第二章</h1><h2 id=\"2G\"><a href=\"#2G\" class=\"headerlink\" title=\"2G\"></a>2G</h2><p><em>2G：支持话音和低速数据。</em></p>\n<p><em>2.5G：GPRS、WPA、蓝牙。</em></p>\n<p>IMSI — International Mobile Subscriber Identification，TMSI。AUC为每个用户提供三元组：随机数RAND、认证响应SRES、密钥Kc。<u>VLR处存储TMSI和IMSI之间的对应关系</u>，<em>有在用户开机或者VLR数据丢失的时候IMSI才被发送，平时仅在无线信道上发送移动用户相应的TMSI</em>。</p>\n<ul>\n<li>有线—线缆——明码传输</li>\n<li>无线—电磁波—加密传输</li>\n<li>有IMSI（可读出），K（过程中不传输，无法读出，网络侧也有相同数据）和ICCID这3组数据就可以复制SIM卡。</li>\n<li>鉴权算法A3，编码算法A5，数据加密密钥生成算法A8</li>\n<li>A3、A8、A5、K、Kc是不在网络中传递的，从而增强了网络的安全性。</li>\n</ul>\n<h3 id=\"GSM鉴权过程\"><a href=\"#GSM鉴权过程\" class=\"headerlink\" title=\"GSM鉴权过程\"></a>GSM鉴权过程</h3><blockquote>\n<p>MSC/VLR：移动交换中心</p>\n</blockquote>\n<p>AUC-128bit随机数-&gt;手机</p>\n<p>SIM卡-Ki+随机数-A3算法-生成SRES-&gt;AUC</p>\n<p>AUC比对自己的和发来的SRES</p>\n<h3 id=\"GSM存在的安全问题\"><a href=\"#GSM存在的安全问题\" class=\"headerlink\" title=\"GSM存在的安全问题\"></a>GSM存在的安全问题</h3><ul>\n<li>单项认证</li>\n<li>非端到端加密</li>\n<li>移动台第一次注册和漫游时，IMSI可能以明文方式发送到VLR/MSC</li>\n<li>加密密钥长度未64bit，太短</li>\n<li>未考虑数据完整性</li>\n<li>加密算法不公开，无法得到客观评价</li>\n<li>加密算法固定不变，缺乏算法和密钥协商部分</li>\n</ul>\n<h2 id=\"3G\"><a href=\"#3G\" class=\"headerlink\" title=\"3G\"></a>3G</h2><h3 id=\"Network-access-security-网络接入安全\"><a href=\"#Network-access-security-网络接入安全\" class=\"headerlink\" title=\"Network access security-网络接入安全\"></a>Network access security-网络接入安全</h3><p>用户身份/位置/行踪保密，密钥分发，实体认证，数据完整性用户数据与信令数据的保密</p>\n<h3 id=\"Provider-domain-security-网络域安全\"><a href=\"#Provider-domain-security-网络域安全\" class=\"headerlink\" title=\"Provider domain security-网络域安全\"></a>Provider domain security-网络域安全</h3><p>核心网络实体间安全交换数据：数据加密，数据认证，身份认证</p>\n<h3 id=\"User-domain-security\"><a href=\"#User-domain-security\" class=\"headerlink\" title=\"User domain security\"></a>User domain security</h3><p>用户与智能卡之间的认证，智能卡与终端之间的认证，链路保护</p>\n<h3 id=\"Application-security\"><a href=\"#Application-security\" class=\"headerlink\" title=\"Application security\"></a>Application security</h3><p>用户能知道一个安全特征集合是否在运行，并且用户可以根据自己的安全需求进行设置</p>\n<blockquote>\n<p>HLR（home location register）保存的是用户的基本信息，如你的SIM的卡号、手机号码、签约信息等，和动态信息，如当前的位置、是否已经关机等；<br>VLR(visiting location register)保存的是用户的动态信息和状态信息，以及从HLR下载的用户的签约信息。 </p>\n<p>当你从北京到上海之后，手机会自动向上海的VLR发起位置更新（登记），上海的VLR会将你现在的位置报告到北京的HLR。当他人呼你时，交换机首先向HLR查询你现在所在的位置，然后接可以呼到你了。</p>\n</blockquote>\n<h3 id=\"一个协议，五元组的生成\"><a href=\"#一个协议，五元组的生成\" class=\"headerlink\" title=\"一个协议，五元组的生成\"></a>一个协议，五元组的生成</h3><h3 id=\"GSM和3G的安全对比\"><a href=\"#GSM和3G的安全对比\" class=\"headerlink\" title=\"GSM和3G的安全对比\"></a>GSM和3G的安全对比</h3><p><img src=\"201807150043-GSM%E5%92%8C3G%E6%AF%94%E8%BE%83.png\" alt></p>\n<h3 id=\"鉴权过程\"><a href=\"#鉴权过程\" class=\"headerlink\" title=\"鉴权过程\"></a>鉴权过程</h3><table>\n<thead>\n<tr>\n<th align=\"center\">MS</th>\n<th align=\"center\">VLR/SGSN</th>\n<th align=\"center\">HE/HLR</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">认证请求</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">生成认证向量AV(1..n)</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">[存储认证向量组]+[选择一个]</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">RAND || AUTH</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">[验证AUTH || 计算RES]</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">RES</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">[比较RES和XRES]</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">计算IC和CK</td>\n<td align=\"center\">选择IK和CK</td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<h2 id=\"4G\"><a href=\"#4G\" class=\"headerlink\" title=\"4G\"></a>4G</h2><h3 id=\"LTE安全威胁\"><a href=\"#LTE安全威胁\" class=\"headerlink\" title=\"LTE安全威胁\"></a>LTE安全威胁</h3><p>3G网络面临的安全威胁同样存在；对eNB（尤其是home eNB）的物理攻击是可能的，对eNB的网络攻击是可能的</p>\n<h3 id=\"LTE-SAE的安全包括两个层次\"><a href=\"#LTE-SAE的安全包括两个层次\" class=\"headerlink\" title=\"LTE/SAE的安全包括两个层次\"></a>LTE/SAE的安全包括两个层次</h3><ul>\n<li>接入层（ AS）安全： UE与 eNB之间的安全</li>\n<li>非接入层（ NAS）安全： UE与 MME之间的安全</li>\n</ul>\n<h3 id=\"只是认证向量中-CK，-IK变为Kasme\"><a href=\"#只是认证向量中-CK，-IK变为Kasme\" class=\"headerlink\" title=\"只是认证向量中 CK， IK变为Kasme\"></a>只是认证向量中 CK， IK变为Kasme</h3><h3 id=\"LTE中的安全问题\"><a href=\"#LTE中的安全问题\" class=\"headerlink\" title=\"LTE中的安全问题\"></a>LTE中的安全问题</h3><ul>\n<li>截获IMSI-<em>在UTRAN中UE无法拒绝网络要求明文IMSI</em></li>\n<li>跟踪UE-3种：<em>跟踪用户的临时标识；利用IMSI/TMSI和RNTI之间的联系；利用IP地址和TMSI/IMSI/RNTI</em></li>\n<li>强制切换eNB/强制切换到传统网络</li>\n</ul>\n<h1 id=\"第三章\"><a href=\"#第三章\" class=\"headerlink\" title=\"第三章\"></a>第三章</h1><h2 id=\"STA与AP的连接建立过程\"><a href=\"#STA与AP的连接建立过程\" class=\"headerlink\" title=\"STA与AP的连接建立过程\"></a>STA与AP的连接建立过程</h2><table>\n<thead>\n<tr>\n<th align=\"center\">有线网络——接入点（AP）</th>\n<th align=\"center\"></th>\n<th align=\"center\">无线终端（STA）</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">固定间隔（通常10秒）广播信标</td>\n<td align=\"center\">&lt;-探测请求-</td>\n<td align=\"center\">扫描所有频段</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">-探测响应-&gt;</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">&lt;-认证请求-</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">假定不使用安全措施，马上回复</td>\n<td align=\"center\">-认证响应-&gt;</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">&lt;-关联请求-</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">-关联响应-&gt;</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">&lt;-数据传输-</td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<p><img src=\"201807151122-STA%E4%B8%8EAP%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B%E8%BF%87%E7%A8%8B.png\" alt></p>\n<h2 id=\"BSS和ESS\"><a href=\"#BSS和ESS\" class=\"headerlink\" title=\"BSS和ESS\"></a>BSS和ESS</h2><p><img src=\"201807151723-BSS%E5%92%8CESS.png\" alt></p>\n<h2 id=\"安全威胁\"><a href=\"#安全威胁\" class=\"headerlink\" title=\"安全威胁\"></a>安全威胁</h2><p>物理威胁：</p>\n<ul>\n<li>电缆</li>\n<li>天线</li>\n<li>无线网卡等</li>\n</ul>\n<p>干扰：</p>\n<ul>\n<li>微波</li>\n<li>人为干扰等</li>\n</ul>\n<p>偷窃用户设备：</p>\n<ul>\n<li>窃听、截取和监听</li>\n<li>欺骗和非授权访问（伪装成授权用户）——对策：使用外部双因子身份验证，如RADIUS或SecurID</li>\n<li>网络接管与篡改</li>\n<li>伪造AP</li>\n<li>破解密码</li>\n<li>拒绝服务攻击</li>\n<li>无线网络钓鱼攻击</li>\n<li>恶意软件和病毒</li>\n</ul>\n<h2 id=\"SSID两种机制\"><a href=\"#SSID两种机制\" class=\"headerlink\" title=\"SSID两种机制\"></a>SSID两种机制</h2><ul>\n<li>对于广播型SSID ，直接使用无线探测工具进行获取</li>\n<li>对于非广播型SSID，伪造AP发送断开连结帧，使客户端重新连结时进行捕获</li>\n</ul>\n<h2 id=\"DDOS\"><a href=\"#DDOS\" class=\"headerlink\" title=\"DDOS\"></a>DDOS</h2><table>\n<thead>\n<tr>\n<th align=\"center\"></th>\n<th align=\"center\"></th>\n<th align=\"center\">未认证，未关联</th>\n<th align=\"center\"></th>\n<th align=\"center\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">认证洪水攻击</td>\n<td align=\"center\">认证成功</td>\n<td align=\"center\"></td>\n<td align=\"center\">取消认证</td>\n<td align=\"center\">取消认证洪水攻击</td>\n</tr>\n<tr>\n<td align=\"center\">（发送认证请求*）</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">（伪造AP发送取消认证报文^）</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">已认证，未关联</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">关联洪水攻击</td>\n<td align=\"center\">关联成功</td>\n<td align=\"center\"></td>\n<td align=\"center\">取消关联</td>\n<td align=\"center\">取消关联洪水攻击</td>\n</tr>\n<tr>\n<td align=\"center\">（发送关联请求*）</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">（伪造AP发送取消关联报文^）</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n<td align=\"center\">已认证，已关联</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>*=使合法用户得不到响应 </p>\n<p>^=使合法用户不能完成认证/关联</p>\n</blockquote>\n<h2 id=\"802-11i-（WPA-WPA2区别）认证\"><a href=\"#802-11i-（WPA-WPA2区别）认证\" class=\"headerlink\" title=\"802.11i （WPA/WPA2区别）认证\"></a>802.11i （WPA/WPA2区别）认证</h2><ul>\n<li><p>WPA = IEEE 802.11i draft 3 = IEEE 802.1X/EAP + WEP(选择性项目)/TKIP</p>\n</li>\n<li><p>WPA2 = WPA+/CCMP</p>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">WPA</th>\n<th align=\"center\">WPA2</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">PSK模式下主密钥手工输入</td>\n<td align=\"center\">PSK模式下主密钥由手工输入和SSID组成（PMK)</td>\n</tr>\n<tr>\n<td align=\"center\">使用TKIP算法——基于RC4</td>\n<td align=\"center\">使用AES算法——完全脱离RC4算法</td>\n</tr>\n<tr>\n<td align=\"center\">密钥分为主与临时密钥</td>\n<td align=\"center\">主PMK、临时PTK、GTK（解密广播与多播消息）</td>\n</tr>\n<tr>\n<td align=\"center\">AP间切换会导致语音中断</td>\n<td align=\"center\">采用预授权方式来保证无缝切换</td>\n</tr>\n</tbody></table>\n<ul>\n<li><p>无线局域网安全协议：开放系统认证 + 共享密钥认证（可选）</p>\n</li>\n<li><p><img src=\"201807151819-WPA%E5%92%8CWPA2.png\" alt></p>\n</li>\n</ul>\n<h2 id=\"RSN工作流程\"><a href=\"#RSN工作流程\" class=\"headerlink\" title=\"RSN工作流程\"></a>RSN工作流程</h2><ul>\n<li><p>RSN安全机制只工作在数据链路层，并不提供端到端的应用层通信保护。</p>\n</li>\n<li><p>三种类型的设备：STA、AP、AS(Authentication Servers)</p>\n</li>\n<li><table>\n<thead>\n<tr>\n<th align=\"center\">STA</th>\n<th align=\"center\">AP</th>\n<th align=\"center\">服务器</th>\n<th align=\"center\">STA</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\"></td>\n<td align=\"center\">发现（加密与认证机制满足AP要求）</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">[转发]</td>\n<td align=\"center\">认证</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">密钥管理</td>\n<td align=\"center\">密钥分配</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">（RSN只保护STA与AP数据链路层间的安全）</td>\n<td align=\"center\"></td>\n<td align=\"center\">加密的数据传输</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"center\">连接中止</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>AP不参与认证</p>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"四次握手\"><a href=\"#四次握手\" class=\"headerlink\" title=\"四次握手\"></a>四次握手</h2><table>\n<thead>\n<tr>\n<th align=\"center\">WirelessStation——AccessPoint</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">AP的IEEE802.1X控制端口关闭</td>\n</tr>\n<tr>\n<td align=\"center\">&lt;-发送Anonce-</td>\n</tr>\n<tr>\n<td align=\"center\">-发送Snonce（带MIC）-&gt;</td>\n</tr>\n<tr>\n<td align=\"center\">&lt;-是否适用一对一密码（带MIC）-</td>\n</tr>\n<tr>\n<td align=\"center\">-响应，四次握手结束-&gt;</td>\n</tr>\n<tr>\n<td align=\"center\">AP的IEEE802.1X控制端口打开</td>\n</tr>\n</tbody></table>\n<h1 id=\"第四章\"><a href=\"#第四章\" class=\"headerlink\" title=\"第四章\"></a>第四章</h1><h2 id=\"Ad-Hoc安全问题\"><a href=\"#Ad-Hoc安全问题\" class=\"headerlink\" title=\"Ad Hoc安全问题\"></a>Ad Hoc安全问题</h2><blockquote>\n<p>无线局域网为单跳网络，不存在路由问题；主要研究集中在物理层和数据链路层；移动终端的所有通信必须经过无线接入点进行<br>Ad Hoc网络为多跳，的研究内容主要以路由协议为核心的网络层设计</p>\n</blockquote>\n<ul>\n<li>无线信道使得Ad Hoc网络可能遭受偷听、伪装、消息重放、消息修改等攻击</li>\n<li>节点可能布置在敌对环境中</li>\n<li>拓扑结构和成员是动态的，节点之间的信任关系也是动态变化的</li>\n<li>安全机制应该适应大规模网络</li>\n</ul>\n<h2 id=\"安全路由-能判断是哪种协议类型的路由攻击\"><a href=\"#安全路由-能判断是哪种协议类型的路由攻击\" class=\"headerlink\" title=\"安全路由-能判断是哪种协议类型的路由攻击\"></a>安全路由-能判断是哪种协议类型的路由攻击</h2><blockquote>\n<p><del>路由表驱动路由协议：</del><br><del>按需路由协议：</del><br><del>混合路由协议：（局部范围1，远距离2）</del></p>\n<p>先应式</p>\n<p>反应式</p>\n<p>混合式</p>\n</blockquote>\n<ul>\n<li>路由协议的攻击模型</li>\n</ul>\n<ul>\n<li><p>更改路由序号的重定向攻击（AODV与DSR）</p>\n</li>\n<li><p>更改跳数的重定向攻击（AODV）</p>\n<ul>\n<li>假冒攻击</li>\n<li>拒绝服务攻击</li>\n</ul>\n</li>\n<li><p>目的节点拒绝服务攻击</p>\n</li>\n<li><p>篡改源路由进行拒绝服务攻击（DSR）</p>\n<ul>\n<li>伪造报文攻击</li>\n</ul>\n</li>\n<li><p>伪造路由错误信息（AODV和DSR）</p>\n</li>\n<li><p>破坏路由状态（DSR）</p>\n</li>\n<li><p>路由表溢出</p>\n</li>\n<li><p>重放攻击</p>\n</li>\n<li><p>黑洞攻击</p>\n<ul>\n<li>自私节点的不合作攻击</li>\n</ul>\n</li>\n<li><p>能量消耗</p>\n</li>\n<li><p>自身数据发送延迟</p>\n</li>\n</ul>\n<h2 id=\"密钥管理-要求和分类\"><a href=\"#密钥管理-要求和分类\" class=\"headerlink\" title=\"密钥管理-要求和分类\"></a>密钥管理-要求和分类</h2><h3 id=\"基本要求\"><a href=\"#基本要求\" class=\"headerlink\" title=\"基本要求\"></a>基本要求</h3><ul>\n<li><p>前向保密：节点退出（主动地或者被强制地）通信组后不能够继续参与组通信<em>即它们无法利用自己拥有的组密钥解密后续组通信数据或者生成有效的加密数据</em></p>\n</li>\n<li><p>后向保密：当新的成员加入到通信组后，必须保证新加入的成员无法解密它加入以前的组通信报文</p>\n</li>\n<li><p>抗合谋攻击</p>\n</li>\n</ul>\n<h3 id=\"分类\"><a href=\"#分类\" class=\"headerlink\" title=\"分类\"></a>分类</h3><ul>\n<li><p>集中式组密钥管理协议（只适用于小规模的组通信）：存在单一的密钥服务器KS对整个组的密钥进行管理。</p>\n</li>\n<li><p>分布式组密钥管理协议：分布式组密钥协议的特点是群组中没有固定的控制节点，组密钥由所有成员贡献的秘密份额协商生成。根据密钥份额的分布性可以分为部分分布式和完全分布式两种情况。</p>\n</li>\n<li><p>层次式组密钥管理协议：具有很强的可扩展性，层次结构也存在随着分层级数的增加</p>\n</li>\n</ul>\n<h2 id=\"传感器-攻击手段和防御方法\"><a href=\"#传感器-攻击手段和防御方法\" class=\"headerlink\" title=\"传感器-攻击手段和防御方法\"></a>传感器-攻击手段和防御方法</h2><ul>\n<li><img src=\"201807152300%E4%BC%A0%E6%84%9F%E5%99%A8%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB%E5%92%8C%E9%98%B2%E5%BE%A1%E6%96%B9%E6%B3%95.png\" alt></li>\n</ul>\n<h1 id=\"第五章\"><a href=\"#第五章\" class=\"headerlink\" title=\"第五章\"></a>第五章</h1><h2 id=\"zigbee-基本信息：工作频段、传输距离-速率\"><a href=\"#zigbee-基本信息：工作频段、传输距离-速率\" class=\"headerlink\" title=\"zigbee-基本信息：工作频段、传输距离/速率\"></a>zigbee-基本信息：工作频段、传输距离/速率</h2><ul>\n<li>2.4GHz-250kbps-16</li>\n<li>868MHz-20kbps-1</li>\n<li>915MHz-40kbps-16</li>\n</ul>\n<h2 id=\"节点类型、组网形态\"><a href=\"#节点类型、组网形态\" class=\"headerlink\" title=\"节点类型、组网形态\"></a>节点类型、组网形态</h2><ul>\n<li>全功能型节点、精简功能节点</li>\n<li>星型、网状星、簇状型</li>\n</ul>\n<h2 id=\"安全借鉴了802-15-4\"><a href=\"#安全借鉴了802-15-4\" class=\"headerlink\" title=\"安全借鉴了802.15.4\"></a>安全借鉴了802.15.4</h2><h2 id=\"三类安全模式\"><a href=\"#三类安全模式\" class=\"headerlink\" title=\"三类安全模式\"></a>三类安全模式</h2><ul>\n<li>无安全模式：默认，可能被窃听</li>\n<li>访问控制列表模式：通过访问控制列表ACL限制非法节点获取数据</li>\n<li>安全模式，同时使用访问控制和帧载荷密码保护</li>\n</ul>\n<h2 id=\"三种密钥-特性\"><a href=\"#三种密钥-特性\" class=\"headerlink\" title=\"三种密钥+特性\"></a>三种密钥+特性</h2><ul>\n<li><p>主密钥：用于配合ZigBee对称密钥的建立（SKKE）过程来派生其它密钥</p>\n</li>\n<li><p>网络密钥：保护广播和组数据的机密性和完整性，同时也为网络认证提供保护（仅在广播消息中使用）</p>\n</li>\n<li><p>链接密钥：保护两个设备之间单播数据的机密性和完整性</p>\n</li>\n</ul>\n<h2 id=\"密钥生成两种方式：密钥传输、预安装\"><a href=\"#密钥生成两种方式：密钥传输、预安装\" class=\"headerlink\" title=\"密钥生成两种方式：密钥传输、预安装\"></a>密钥生成两种方式：密钥传输、预安装</h2>","categories":["技术"],"tags":["无线网络安全"]},{"title":"网络协议分析复习整理","url":"https://littleghost2016.github.io/2018/06/28/网络协议分析复习整理/","content":"<h1 id=\"一、概论\"><a href=\"#一、概论\" class=\"headerlink\" title=\"一、概论\"></a>一、概论</h1><ol>\n<li><em>协议是网络中互相通信的<strong>对等实体间</strong>进行数据交换而建立的<strong>规则</strong>、标准或约定，保证实体在计算机网络中<strong>有序地交换数据</strong>。实体(Entity)是指任何可以发送或接收信息的硬件或软件进程，在大多数情况下，就是一个特定的软件进程。位于<strong>不同系统</strong>的<strong>同一层次内交互</strong>的实体，就构成了<strong>对等实体</strong>。</em></li>\n<li><strong>协议</strong>是规则，约定，而服务是功能，本领。从层次上来说：协议是通信双方对等层之间才有的，是水平方向上的关系。而<strong>服务</strong>则是通信某一端上下层之间才有的，是垂直方向上的关系，而且是自下向上提供的 。<strong>每一层的协议是通过下层对本层提供的服务来支持实现的，服务是指下层为紧向邻的上层提供的功能调用。</strong></li>\n<li>网络协议就是具有规定文法、语法和语义的语言 。<em>文法给出了有效信息的精确格式 ，语法描述了数据交换的规则，语义规定了可交换信息的词汇及其含义。</em></li>\n<li>协议<strong>三要素</strong>：<strong>语法</strong>、<strong>语义</strong>、<strong>同步</strong>。<strong>六元素</strong>：<strong>服务原语和服务原语时序</strong>、<strong>协议数据单元PDU和PDU交换时序</strong> 、<strong>协议状态</strong>、<strong>协议事件</strong>、<strong>协议变量</strong>、<strong>协议操作和谓词</strong>。</li>\n<li>网络协议中的语法体现为数据报文中的控制信息(通常在报文的首部)和各种控制报文的结构、格式。<em>即规定报文的长度，报文中划分多少个域(Field)，每个域的名称、数据类型、长度等。其中，报文中各个域的类型、长度及相互间的位置、顺序关系则构成了词法。</em></li>\n<li>网络协议的语义可以理解为：协议数据报文中的<u>控制信息和控制报文所约定的含义</u>，即<u>需要完成何种动作，发出何种控制信息以及做出何种响应</u>。<em>例：IP报文首部控制信息中的目的地址域指明了报文的目的地，接收到此报文的网络节点均将该域作为进行路由选择的依据，因而，规定在首部控制信息中的给定域给出目的节点地址就是一种语义。</em></li>\n<li>简单地说，同步是指<u>事件发生顺序</u>的详细说明。具体来说指通信过程中各种<u>控制报文传送的顺序关系</u>。<em>例：例如“允许连接”或“拒绝连接”报文必须是作为请求连接报文的一种响应来发送，“拆除连接”报文也必须在建立连接后的某种条件下发送。</em></li>\n<li>为什么推崇协议标准化：1.产品质量和可靠性 2.提供更好的产品互联性 3.简化使用 4.提高发布效率</li>\n<li>ISO/IETF/W3C/ATM Forum/ANSI/IEEE/ACM</li>\n<li>协议工程过程是<u>协议化</u>、<u>工程化</u>的。</li>\n<li>“协议的设计、形式描述、验证、实现、测试、运行”这一全过程称为“协议开发”，即协议开发是指协议工程活动的全过程。</li>\n<li><em>协议设计阶段的结果是非形式描述协议文本。协议设计涉及到很多技术，如差错控制技术、流量控制技术、连接管理技术、路由选择技术等。协议设计还必须遵循一些基本原则，如结构化、模块化等。</em></li>\n<li>形式描述模型：有限状态机FSM (Finite State Machine) 、Petri网(PetriNet) 。形式描述语言：CCITT制定的SDL。</li>\n<li>协议的验证主要内容包括：<u>可达性分析、死锁和活锁检测、协议的有界性和完整性检验、协议的动作序列检查、通道溢出检查</u>等</li>\n<li>协议一致性测试要做到两点：<u>彻底性(彻底测试所实现的协议)</u>和<u>标准化(使用的测试集必须是标准的)</u>。协议的性能主要包括<u>吞吐量</u>和<u>时延</u>。</li>\n<li><img src=\"%E5%8D%8F%E8%AE%AE%E8%AE%BE%E8%AE%A1%E8%BF%87%E7%A8%8B.png\" alt></li>\n</ol>\n<h1 id=\"二、协议设计\"><a href=\"#二、协议设计\" class=\"headerlink\" title=\"二、协议设计\"></a>二、协议设计</h1><ol>\n<li>同一系统相邻两层的实体进行交互的地方，通常称为<strong>服务访问点SAP</strong> (Service Access Point)，服务用户通过SAP调用服务，<u>一个SAP拥有唯一的地址</u>。服务用户通过<u>在一个SAP递交数据</u>并从<u>另一个SAP读出</u>。</li>\n<li>在进行交互时所要交换的一些必须信息(或命令)称为<strong>服务原语</strong>(Service Primitives)，以表明需要本地的或远端的对等实体做什么事情。<u>原语告诉服务实体要执行某个动作，或者将对等实体所执行的动作报告给服务用户</u>。服务的调用是通过SP描述的，具体而言，SP就是服务用户与服务提供者之间的交互的抽象描述，并不限定这些交互如何实现。</li>\n<li>每层均可使用的<strong>4</strong>种服务原语。Request/Indication/Response/Confirm</li>\n<li>一个(n)实体向上一层所提供的服务由以下三部分构成： <u>(n)实体自己提供的某些功能</u>、<u>通过与处在另一系统中的对等(n)实体的通信而得到的服务</u>、<u>从(n-1)层及其以下各层以及本地系统环境得到的服务</u>。将(n)层对等实体之间，为实现该层协议所交换的信息单元称为<strong>协议数据单元PDU</strong> (Protocol Data Unit)。通常将第n层的协议数据单元记为(n)PDU。</li>\n<li>PDU通常由2部分构成：<strong>用户数据</strong>和<strong>协议控制信息PCI</strong>(Protocol Control Information)。PDU两种类型：<strong>数据PDU</strong>、<strong>控制PDU</strong>（不携带用户数据）。在不同的协议层次中，PDU还的一些其它的表示法：<u>物理层：比特(bit)</u>；<u>数据链路层：帧(frame)或信元(cell)</u>；<u>网络层 ：分组或包(packet)</u> ；<u>传输层 ：分段(segment)、数据报(datagram)</u>；<u>应用层：消息(message)</u>。</li>\n<li>OSI将层与层之间交换的数据的单元称为<strong>服务数据单元SDU</strong> (Service Data Unit)。<em>一个(n)服务数据单元就是(n)服务所要传送的逻辑数据单元。SDU就是数据PDU中的用户数据，但不一定是一一对应关系。 可以是多个SDU合成为一个PDU(称为“拼装”)，也可以是将一个SDU划分为几个PDU(称为“分段”)。</em></li>\n<li>协议是“水平的”，即协议是<u>控制对等实体之间通信的规则</u>。服务是“垂直的”，即服务是<u>由下层向上层通过层间接口提供的</u>。<em>“虚拟”指看起来存在但实际上不存在的事物，“透明”相反。</em></li>\n<li>N层中任何两个协议实体通过<u>(n-1)SAP</u>所形成的逻辑数据通路称为<u>(n-1)层通道</u>。通道的类型：空通道、非缓冲通道、缓冲通道。通道队列的主要性质是<u>平均队列长度</u>以及<u>最大队列允许长度</u>。</li>\n<li><strong>回程时延RTT</strong>。从n层源端实体<u>发出报文到该报文的确认信息到达</u>该实体之间的时间间隔，它包括目标实体收到报文之后，对报文进行处理然后发出确认信息的时间。（处理时延、排队时延、发送时延、传播时延）</li>\n<li>如果通道是利用(n-1)层的<u>有</u>（无）连接服务形成的，那么传递的报文<u>不会</u>（有可能）失序。通道的工作方式：单工、半双工、全双工 | 同步与异步。</li>\n<li>协议的两大功能：<strong>连接管理</strong>，<strong>数据交换</strong>。</li>\n</ol>\n<ul>\n<li>连接管理：<ul>\n<li>两种连接：点对点、点对多点</li>\n</ul>\n</li>\n<li>三种主要功能：连接建立、连接释放。连接维护<ul>\n<li>数据交换：</li>\n<li>n层协议接收<u>n层用户递交的(n)SDU</u>（(n-1)层通道的(n)PDU），<u>将之转换成(n)PDU</u>（提取其中的(n)SDU），<u>从(n-1)层通道发送出去</u>（转交给n层用户）。</li>\n<li>一般要实现功能：对齐、分段和合段、拼装和分离、PDU的装配和拆装、SDU的编码与解码、加校验和、抖动补偿、带外数据和紧急数据的发送。<em>(n-1)通道提供的数据通道的可靠性越高，则n层协议需实现的差错控制机制则越少。</em></li>\n</ul>\n</li>\n</ul>\n<ol start=\"12\">\n<li>用来防止丢失、重复和乱序的方法包括：<u>序号、确认、重传、计时器</u>。<em>(n-1)通道提供的数据通道的可靠性越高，则n层协议需实现的差错控制机制则越少。</em></li>\n</ol>\n<ul>\n<li>序号：检测PDU重复、失序、丢失|进行无二义性编号|SDU序号、PDU序号、字节序号|使用一个非常大的序号空间<em>（从一端到另一端的最大可能的延迟时间L内，所有从源点发送出去的新的数据单元都具有不同的序号）</em>序号是确认和重传的基础，此外序号还可用于流量控制 \u0005</li>\n<li>ACK可以确定<u>PDU</u>和<u>字节</u>。可确认的情况：<u>已正确到达</u>，<u>还没有收到</u>，<u>收到但有错(相当于没有收到)</u>。分为三种类型：<u>AcK</u>，<u>Nak</u>，<u>Select Ack</u>。两种发送方式：<u>独立确认</u>（指用一个确认PDU，可随时发送），<u>应答携带</u>（放在数据PDU中可提高效率，但需要接收方有数据发送）。<em>通常在一种协议中两种确认形式均存在</em>。选择确认信息中包含多个序号时有三种格式：<u>表</u>，<u>范围</u>，<u>位图</u>。</li>\n<li>计时器的超时值设置依赖RTT。计时器的超时值<u>太短：大量数据重传，加剧网络拥塞程度</u>；<u>太长：数据丢失得不到及时纠正，降低协议性能</u>。</li>\n<li>基于滑动窗口的重传方法：<u>回退N帧</u>和<u>选择重传</u>。</li>\n</ul>\n<ol start=\"13\">\n<li>N层协议所提供的服务是N层协议外部行为的体现。在协议的控制下， N层的两个对等实体间通信，使其能够向上一层提供服务。要实现本层协议，需要使用下一层所提供的服务。一般用服务规范(Service Specification)来定义和描述N层协议向外部所提供的服务，包括：服务原语和服务原语时序。N 层协议的服务原语和原语参数详细准确地描述了N层协议和它的服务用户之间的接口。</li>\n<li>协议的主体是它的<strong>状态-事件</strong>转换机制 。一个完整的服务原语通常包括<u>原语名字</u>、<u>原语类型</u>和<u>原语参数</u>三大部分，如T-CONNECT.request(被叫地址，主叫地址，……)。</li>\n<li>根据使用服务原语的角度来考虑，可将服务分为两类： <u>需要证实的服务</u>，<u>不需要证实的服务</u>。根据所提供的服务的不同，为完成某功能所需的<u>服务原语的个数</u>和<u>服务原语的时序</u>是不同的。</li>\n<li>三次握手需要用到三个PDU：<u>CR(连接请求)</u>，<u>CC(连接证实)</u>，<u>AK(确认)</u>。</li>\n<li>协议状态分为：<u>局部状态</u>，<u>全局状态</u>。N层协议必须定义<strong>所有的</strong>协议状态。</li>\n<li>协议事件根据用途可分为：<u>输入事件</u>，<u>输出事件</u>。根据作用范围可分为：<strong>通信事件</strong>（收发服务原语或收发PDU，可分为同步时间或叫协同事件和异步事件），<strong>内部事件</strong>。三个性质：<strong>成对性</strong>（通信事件成对，内部事件不成对）、<strong>原子性</strong>、<strong>时序性</strong>。每种协议功能都是通过<strong>一组协议过程的执行</strong>来实现。</li>\n<li>协议操作只有在<u>一定条件</u>（谓词）下才能够被执行。<em>描述一个协议过程必须说明该过程所包含的操作以及执行操作的谓词。</em></li>\n<li>元素之间的有机联系：<strong>在什么协议状态下，在什么输入事件驱动下，调用什么协议过程；协议过程在什么条件下(谓词)，采取什么协议动作(操作)，输出什么事件或修改哪些协议状态和变量。</strong></li>\n<li>协议三种运行方式：<strong>协议交替</strong>、<strong>协议并发</strong>、<strong>协议并行</strong>。</li>\n<li>协议文本中最重要、最主要部分是<strong>协议元素的描述</strong>。必须对每一项协议元素作出<strong>准确、清晰、无二义性</strong>的定义。</li>\n<li>一个好的结构化协议设计，应具有以下特点：<strong><u>简单、模块化</u></strong>、<u>有界性自稳定性和自适应性</u>、<u>健壮性</u>、<u>一致性</u>。前两个最基本。分层设计难点：层<u>次太少会使每一层协议太复杂</u>，太多则在<u>描述和综合各层的系统时难度较大</u>。协议分层优点：<u>各层独立、灵活性好、结构上可分割、易于实现和维护、能促进标准化工作</u>。</li>\n<li>流量控制：<u>发送方以不超过接收方处理能力的速率发送数据</u>。差错控制<u>有全局性</u>。相同：<u>提高网络性能</u>。</li>\n</ol>\n<h1 id=\"三、协议形式化描述技术-概述\"><a href=\"#三、协议形式化描述技术-概述\" class=\"headerlink\" title=\"三、协议形式化描述技术-概述\"></a>三、协议形式化描述技术-概述</h1><ol>\n<li>形式化技术 FDTs (Formal Description Techniques)，FSM是个五元组：FSM = (S, s0, I, delta, F)</li>\n</ol>\n<ul>\n<li>S，有限状态集合。任一确定时刻，FSM只能处于一个确定的状态。</li>\n<li>s0，初始状态，开始接受输入。</li>\n<li>I，有限输入字符集合，任一确定的时刻智能接受一个。</li>\n<li>delta，状态转换函数，</li>\n<li>F，终态集(可空)，不再接收输入。</li>\n</ul>\n<ol start=\"2\">\n<li>Moore 机：输出与状态有关。Moore FSM is 6-tuple: FSM = (S, s0, I, O, delta, lambda)。</li>\n</ol>\n<ul>\n<li>O，有限输出字符集合。</li>\n<li>lambda，s-&gt;O，输出函数。</li>\n<li>Moore机只是在接收输入串的过程中不断改变状态，并且<u>在每个状态上有字符输出</u>。<br><em>有限状态机可看做是Moore机的一个特例。</em><br>对于任何一个有限状态机(S, s0, I, delta, F)，引入输出字符集合 O = {0, 1}，并定义S到O的映射lambda为：s属于F, lambda(s)=1；s不属于F, lambda(s)=0。这样得到一个Moore机M=(S, s0, I, O, delta, lambda)，在该Moore机中，输出为1的状态为终结状态，输出为0的状态即为非终结状态。</li>\n</ul>\n<ol start=\"3\">\n<li>Mealy机：输出与状态和输入有关</li>\n</ol>\n<ul>\n<li>lambda，s*I-&gt;O，输出函数。</li>\n<li>Mealy机只是在接收输入串的过程中不断改变状态，并且<u>字符输出与当前状态及输入串有关</u>。<br><em>Moore机可看做是Mealy机的一个特例。</em><br>对于任何一个Moore机 M=(S, s0, I, O, delta, lambda)，PPT三-32</li>\n</ul>\n<ol start=\"4\">\n<li><p>停等协议的状态变迁表：发帧的2竖列除了准备发且发了的，其他状态都不改变，且斜杠后只有发了的有东西。准备发时收到ACK状态不变。准备发和发了的超时，变为准备发相同的状态。</p>\n</li>\n<li><p><img src=\"%E7%8A%B6%E6%80%81%E5%8F%98%E8%BF%81%E5%9B%BE%E5%90%88%E5%B9%B6%E5%89%8D.png\" alt></p>\n</li>\n<li><p><img src=\"%E7%8A%B6%E6%80%81%E5%8F%98%E8%BF%81%E5%9B%BE%E5%90%88%E5%B9%B6%E5%90%8E.png\" alt></p>\n</li>\n<li><p><img src=\"%E5%81%9C%E7%AD%89%E5%8D%8F%E8%AE%AE%E9%83%BD%E6%9C%89%E7%BC%96%E5%8F%B7.png\" alt></p>\n</li>\n<li><p><img src=\"%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2%E5%9B%BE%E8%A1%A8%E8%BD%AC%E6%8D%A2.png\" alt></p>\n</li>\n</ol>\n<h1 id=\"四、协议形式化描述技术-PetriNet\"><a href=\"#四、协议形式化描述技术-PetriNet\" class=\"headerlink\" title=\"四、协议形式化描述技术-PetriNet\"></a>四、协议形式化描述技术-PetriNet</h1><ol>\n<li>四元组(P, T , I, O)</li>\n</ol>\n<ul>\n<li>P，位置(places)的有限集合。</li>\n<li>T，变迁(transitions)的有限集合，且T与P不相交。</li>\n<li>I，输入函数，是变迁T到位置的映射。</li>\n<li>O，输出函数，同I。</li>\n<li>点火前，取出标记数量=远离圆的弧线数；点火后，放入标记数量=进入圆的弧线数。</li>\n</ul>\n<ol start=\"2\">\n<li>状态变迁类型：<u>顺序、并发、互斥变迁</u>。</li>\n<li>Petri网的性质：<strong>行为性质</strong>(与初始标记量有关)、<strong>结构性质</strong>(无关)。</li>\n</ol>\n<ul>\n<li>行为性质<ul>\n<li>可达性。</li>\n<li>有界性。(任一可达)位置p为k有界；Petri网为k有界(每个位置都K有界)；有界性意味着位置中的标记数量不会无限地增加。</li>\n<li>安全性。如果位置p为1有界，则称位置p是安全的。</li>\n<li>活性。<em>从M0可达的任一标记向量出发，都可以通过执行某一变迁序列而最终引发变迁t，则称t在标记向量M0下是活的。</em></li>\n<li>可逆性、可覆盖性、可持续性、公平性。</li>\n</ul>\n</li>\n<li>结构性质<ul>\n<li>结构活性、结构有界性、可重复性、相容性结构有界公平性</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"五、SDL\"><a href=\"#五、SDL\" class=\"headerlink\" title=\"五、SDL\"></a>五、SDL</h1><ol>\n<li>规范及其描述语言SDL (Specification and Description Language)。SDL是基于扩展有限状态机和抽象数据类型的混合技术。一个SDL应用的静态结构由<u>系统(System)、功能块(Block)、进程(Process)、过程(Procedure)和通道(Channel)</u>构成。<em>各功能块包含若干个进程，SDL系统的动态行为具体表现为各进程的实例的并发操作。</em></li>\n<li>一般来说，SDL中的数据类型定义包括三个部分：类定义，操作符(Operators)定义和等价式(Equations)定义。</li>\n<li>编程</li>\n</ol>\n<ul>\n<li><p>SDL中的数据类型定义包括三个部分：类定义，操作符(Operators)定义和等价式(Equations)定义</p>\n</li>\n<li><p>类定义：<code>newtype ... endnewtype</code></p>\n</li>\n<li><p>等价式、等值类。等价式参数化：<code>FOR ALL x, z IN Real  ((x/z)*z = = IF z/=0 THEN x ELSE ERROR! FI)</code>。产生器，如：数组、串、幂集。继承<code>INHERITS  Sort1</code></p>\n</li>\n<li><p>记录</p>\n</li>\n</ul>\n<figure class=\"highlight pascal\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//定义</span></span><br><span class=\"line\">STRUCT</span><br><span class=\"line\">\tlast_name, first_name, street, city: Charstring;</span><br><span class=\"line\">\tnumber : Integer;</span><br><span class=\"line\"><span class=\"comment\">//赋值</span></span><br><span class=\"line\">address :=(.Lai, Richard, Carbost Court, Macleod, <span class=\"number\">2</span>.);</span><br><span class=\"line\"><span class=\"comment\">//取出一个变量</span></span><br><span class=\"line\">town := address!city;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>功能块内通信手段主要包括共享变量或通过信号路由(signal routes)交换信号。信号路由中的箭头在线条的两端。 通道在中间。</li>\n</ul>\n<ol start=\"4\">\n<li><img src=\"%E7%BC%96%E7%A8%8B%E5%92%8C%E5%9B%BE%E7%9A%84%E8%BD%AC%E6%8D%A2.png\" alt></li>\n</ol>\n<h1 id=\"六、协议验证技术\"><a href=\"#六、协议验证技术\" class=\"headerlink\" title=\"六、协议验证技术\"></a>六、协议验证技术</h1><ol>\n<li>通过协议验证，可以获知协议设计是否满足<u>正确性</u>、<u>完整性</u>和<u>一致性</u>等要求。</li>\n</ol>\n<ul>\n<li>服务规范 协议规范的一致</li>\n<li>协议规范 协议实现的一致</li>\n</ul>\n<ol start=\"2\">\n<li>形式化协议验证两类方法：<u>模型检测</u>(可达性分析、不变性分析、重要问题：状态空间爆炸)、<u>演义验证</u>。协议验证着重在于一般性质，而协议测试则着重于特殊性质。</li>\n<li>安全性 v.s. 活动性</li>\n</ol>\n<ul>\n<li>安全性：<ul>\n<li>Bad things never happen。</li>\n<li>协议的所有动作均需与它的服务规范保持一致，且没有不期望的情况出现。</li>\n<li>安全性保证协议不出现错误。</li>\n</ul>\n</li>\n<li>活动性<ul>\n<li>Good things eventually happen。</li>\n<li>在有穷时间内，完成规范所规定的动作(或所有的服务必须在有限时间内完成。</li>\n<li>协议的活动性体现在终止性(termination)和进展性(progress)两个方面。<em>终止性是指协议从任何一个状态开始运行，经过有限时间总能正确地到达终止状态；进展性是指协议从初始状态运行，经过有限时间总能到达指定状态。</em></li>\n</ul>\n</li>\n</ul>\n<ol start=\"4\">\n<li>可达性分析</li>\n</ol>\n<ul>\n<li><p>原理：采用<strong>穷举法</strong>检查同一层内两个或多个协议实体间所有可能的交互所产生的全局状态。</p>\n</li>\n<li><p>三种算法：</p>\n<ul>\n<li><strong>穷尽性可达性分析(完全搜索)算法</strong> (exhaustive or full search)：优点在于可以证明协议中没有错误，当系统状态的数目非常大时，会发生状态空间爆炸。</li>\n<li><strong>受控部分搜索算法</strong>：证明错误的存在，而不是证明没有错误。解决了状态空间爆炸，但只能最大限度地发现错误。</li>\n<li><strong>随即模拟算法</strong>：即使是无限大系统也可以应用。没有明确的终止，无法判断是否已经访问过系统的所有可达状态，也就无法判断是否已经发现了系统的所有错误。不能证明协议中没有错误。</li>\n</ul>\n</li>\n<li><p>解决空间状态爆炸：部分规范描述和验证、选择大的动作单元、分解或划分、按断言来分类状态。</p>\n</li>\n</ul>\n<h1 id=\"七、一致性测试技术\"><a href=\"#七、一致性测试技术\" class=\"headerlink\" title=\"七、一致性测试技术\"></a>七、一致性测试技术</h1><ol>\n<li>“一致性测试”的目的是检查一个给定协议实现的外部行为是否符合协议的规范，“验证”则是检查形式化规范的逻辑正确性。</li>\n</ol>\n<p><em>ps：就是这第七章，当时听谁说不考，就没看多少，结果出了几个小题和一个大题 =_=</em></p>\n","categories":["技术"],"tags":["网络协议分析"]},{"title":"逆向工程复习整理","url":"https://littleghost2016.github.io/2017/11/30/逆向工程复习整理/","content":"<p>大三上学期《软件逆向工程》考前整理。<em>现在看好像都忘得差不多了…</em></p>\n<h1 id=\"第一章-前言\"><a href=\"#第一章-前言\" class=\"headerlink\" title=\"第一章-前言\"></a>第一章-前言</h1><ol>\n<li><p>逆向工程的应用：</p>\n<ul>\n<li><p>逆向工程的应用(动态、静态)</p>\n</li>\n<li><p>闭源软件漏洞分析(发现和分析漏洞、开发破解程序(exploit))</p>\n</li>\n<li><p>闭源软件互操作性分析(只能获得二进制程序而想开发与其互操作的软件；依据已有程序，开发适用于其他硬件平台的程序)</p>\n</li>\n<li><p>验证编译器的性能和准确性(验证编译器是否符合规范；寻找优化编译器输出的方法；编译器本身是否有安全问题.</p>\n</li>\n</ul>\n</li>\n<li><p>逆向工程的合法性</p>\n<ul>\n<li><p>以互操作为目的的逆向工程</p>\n</li>\n<li><p>当软件版权所有者无法进行软件错误修正时，通过逆向工程对软件错误进行修正和破解</p>\n</li>\n<li><p>在不违反专利权或商业秘密保护的前提下，通过逆向工程确定软件中不受版权保护的部分(如一些算法)</p>\n</li>\n</ul>\n</li>\n</ol>\n<h1 id=\"第二章-86-x64：\"><a href=\"#第二章-86-x64：\" class=\"headerlink\" title=\"第二章-86_x64：\"></a>第二章-86_x64：</h1><ol>\n<li><p>x86：Intel体系结构的32位实现，基于Intel8086处理器的<em>小端序</em>体系结构</p>\n</li>\n<li><p>三种主要操作模式：</p>\n<ul>\n<li><p>实模式(real)：只支持16位指令集</p>\n</li>\n<li><p>保护模式(protected)：支持虚拟内存、分页等</p>\n</li>\n<li><p>系统管理模式(System Management Mode)：用于执行嵌入在固件中的特殊代码</p>\n</li>\n</ul>\n</li>\n<li><p>小端序(little endian)：低位字节存储在内存中低位地址，效率较高；大端序(RISC架构采用)</p>\n</li>\n<li><p>用户态应用运行于Ring3，内核运行于Ring0。Ring等级在CS寄存器中保存。</p>\n</li>\n<li><p>EFLAGS:</p>\n<ul>\n<li>ZeroF:结果0-&gt;ZF=1</li>\n<li>OverflowF:有符号整数溢出时OF=1</li>\n<li>CarryF:无符号整数溢出时CF=1</li>\n<li>SignF:与最高位相同</li>\n<li>DirectionF：=1则ESI、EDI每次减小</li>\n</ul>\n</li>\n<li><p>Byte-&gt;1 Word-&gt;2 Dword-&gt;4</p>\n</li>\n<li><p>scas-&gt;AL/AX/EAX与[EDI]比较，并对EDI自增/自减，STOS-&gt;AL/AX/EAX的值写入EDI指向的内存</p>\n</li>\n</ol>\n<h1 id=\"第四章-PE结构：\"><a href=\"#第四章-PE结构：\" class=\"headerlink\" title=\"第四章-PE结构：\"></a>第四章-PE结构：</h1><p> 3C-&gt;PE头地址</p>\n<h1 id=\"第五章-Windoes编程\"><a href=\"#第五章-Windoes编程\" class=\"headerlink\" title=\"第五章-Windoes编程\"></a>第五章-Windoes编程</h1><h2 id=\"核心API\"><a href=\"#核心API\" class=\"headerlink\" title=\"核心API\"></a>核心API</h2><ol>\n<li>OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwPID)</li>\n<li>CreateRemoteThread(hProcess, NULL, 0, lpStartAddress, lpParameter, 0, NULL)</li>\n<li>VirtualAllocEx(hProcess, NULL, dwBufSize, MEM_COMMIT, PAGE_READWRITE)</li>\n<li>hThread = CreateThread(NULL,0,lpStartAddress,lpParameter,0,＆dwThread)</li>\n<li>WriteProcessMemory(hProcess,lpBaseAddress,lpBuffer,nSize,<em>Out</em> SIZE_T  *lpNumberOfBytesWritten)</li>\n<li>GetProcAddress(hModule-&gt;DLL模块的句柄可由LoadLibrary等返回, lpProcName名或序数)</li>\n<li>WaitForSingleObject(hHandle-必有synchronize权限, dwMilliseconds)</li>\n<li>GetModuleFileName(hModule-被装载模块句柄,NULL则返回当前进程可执行文件路径,<em>Out</em> LPTSTR lpFilename,nSize-大于则截尾)</li>\n<li>GetModuleHandle(lpModuleName-被装载模块(.dll或.exe文件)名称，若省略扩展名则默认为.dll，若为NULL，则返回创建当前进程的.exe的句柄)</li>\n<li>CloseHandle(hObject)</li>\n<li>SetWindowsHookEx(idHook,lpfn-指向(回调函数)的指针,hMod-指向回调函数所在DLL的句柄,dwThreadId-被关联到的线程的ID)</li>\n<li>CallNextHookEx(hhk,nCode-传递到当前钩子过程的钩子代码,wParam,lParam)</li>\n<li>UnhookWindowsHookEx(hhk-被移除钩子的句柄，由前一次调用的SetWindowsHookEx函数返回)</li>\n</ol>\n<h1 id=\"第六章-DLL注入\"><a href=\"#第六章-DLL注入\" class=\"headerlink\" title=\"第六章-DLL注入\"></a>第六章-DLL注入</h1><p>1.注入方法：实现远程线程CreateRemoteThread()、使用注册表AppInit_DLLs值、消息钩取SetWindowsHookEx()</p>\n<h1 id=\"第七章-API钩取\"><a href=\"#第七章-API钩取\" class=\"headerlink\" title=\"第七章-API钩取\"></a>第七章-API钩取</h1><h1 id=\"第八章-混淆技术\"><a href=\"#第八章-混淆技术\" class=\"headerlink\" title=\"第八章-混淆技术\"></a>第八章-混淆技术</h1><ol>\n<li>防篡改技术分为静态和动态，混淆属于静态技术</li>\n<li>基于数据的混淆：常量展开/插入死代码/数据编码方案(f,x-混淆-&gt;f(x0)，解混淆时f(x0)-恢复-&gt;x0)</li>\n<li>等价-x=~x+1，x-1=~(-x)，x+1=-(~x)</li>\n<li>基于控制的混淆：组合使用函数内联与外联/引入无条件分支，破环局部性/插入垃圾代码/基于处理器的控制间接化/不透明谓词</li>\n</ol>\n","categories":["技术"],"tags":["逆向"]},{"title":"about","url":"https://littleghost2016.github.io/about/index.html","content":"","categories":[],"tags":[]},{"title":"category","url":"https://littleghost2016.github.io/category/index.html","content":"","categories":[],"tags":[]},{"title":"link","url":"https://littleghost2016.github.io/link/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"https://littleghost2016.github.io/search/index.html","content":"","categories":[],"tags":[]},{"title":"tag","url":"https://littleghost2016.github.io/tag/index.html","content":"","categories":[],"tags":[]}]